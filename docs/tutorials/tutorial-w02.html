<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>QML - QML tutorial - Week 2</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

<link href="../site_libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet">
<script src="../site_libs/pagedtable-1.1/js/pagedtable.js"></script>


<link rel="stylesheet" href="../styles.css">
<link rel="stylesheet" href="webex.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">QML</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html" rel="" target="">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../content.html" rel="" target="">
 <span class="menu-text">Course content</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../assessments.html" rel="" target="">
 <span class="menu-text">Assessment</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools ms-auto">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#some-basics" id="toc-some-basics" class="nav-link active" data-scroll-target="#some-basics"><span class="header-section-number">1</span> Some basics</a>
  <ul class="collapse">
  <li><a href="#files-folder-and-file-extensions" id="toc-files-folder-and-file-extensions" class="nav-link" data-scroll-target="#files-folder-and-file-extensions"><span class="header-section-number">1.1</span> Files, folder and file extensions</a></li>
  <li><a href="#file-paths" id="toc-file-paths" class="nav-link" data-scroll-target="#file-paths"><span class="header-section-number">1.2</span> File paths</a></li>
  </ul></li>
  <li><a href="#the-data" id="toc-the-data" class="nav-link" data-scroll-target="#the-data"><span class="header-section-number">2</span> The data</a>
  <ul class="collapse">
  <li><a href="#download-the-data-file" id="toc-download-the-data-file" class="nav-link" data-scroll-target="#download-the-data-file"><span class="header-section-number">2.1</span> Download the data file</a></li>
  <li><a href="#about-shallow.csv" id="toc-about-shallow.csv" class="nav-link" data-scroll-target="#about-shallow.csv"><span class="header-section-number">2.2</span> About <code>shallow.csv</code></a></li>
  </ul></li>
  <li><a href="#r-packages" id="toc-r-packages" class="nav-link" data-scroll-target="#r-packages"><span class="header-section-number">3</span> R packages</a></li>
  <li><a href="#import-and-view-data" id="toc-import-and-view-data" class="nav-link" data-scroll-target="#import-and-view-data"><span class="header-section-number">4</span> Import and view data</a>
  <ul class="collapse">
  <li><a href="#import-the-data" id="toc-import-the-data" class="nav-link" data-scroll-target="#import-the-data"><span class="header-section-number">4.1</span> Import the data</a></li>
  <li><a href="#view-the-data" id="toc-view-the-data" class="nav-link" data-scroll-target="#view-the-data"><span class="header-section-number">4.2</span> View the data</a></li>
  </ul></li>
  <li><a href="#r-scripts" id="toc-r-scripts" class="nav-link" data-scroll-target="#r-scripts"><span class="header-section-number">5</span> R scripts</a>
  <ul class="collapse">
  <li><a href="#create-an-r-script" id="toc-create-an-r-script" class="nav-link" data-scroll-target="#create-an-r-script"><span class="header-section-number">5.1</span> Create an R script</a></li>
  <li><a href="#write-code" id="toc-write-code" class="nav-link" data-scroll-target="#write-code"><span class="header-section-number">5.2</span> Write code</a></li>
  <li><a href="#relative-paths" id="toc-relative-paths" class="nav-link" data-scroll-target="#relative-paths"><span class="header-section-number">5.3</span> Relative paths</a></li>
  <li><a href="#run-the-script" id="toc-run-the-script" class="nav-link" data-scroll-target="#run-the-script"><span class="header-section-number">5.4</span> Run the script!</a></li>
  </ul></li>
  <li><a href="#data-transformation" id="toc-data-transformation" class="nav-link" data-scroll-target="#data-transformation"><span class="header-section-number">6</span> Data transformation</a>
  <ul class="collapse">
  <li><a href="#summary-measures" id="toc-summary-measures" class="nav-link" data-scroll-target="#summary-measures"><span class="header-section-number">6.1</span> Summary measures</a></li>
  <li><a href="#count-occurrences" id="toc-count-occurrences" class="nav-link" data-scroll-target="#count-occurrences"><span class="header-section-number">6.2</span> Count occurrences</a></li>
  <li><a href="#grouping-data" id="toc-grouping-data" class="nav-link" data-scroll-target="#grouping-data"><span class="header-section-number">6.3</span> Grouping data</a></li>
  <li><a href="#what-the-pipe" id="toc-what-the-pipe" class="nav-link" data-scroll-target="#what-the-pipe"><span class="header-section-number">6.4</span> What the pipe?!</a></li>
  </ul></li>
  <li><a href="#summary" id="toc-summary" class="nav-link" data-scroll-target="#summary"><span class="header-section-number">7</span> Summary</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">QML tutorial - Week 2</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="some-basics" class="level2" data-number="1">
<h2 data-number="1" class="anchored" data-anchor-id="some-basics"><span class="header-section-number">1</span> Some basics</h2>
<p>In the tutorial last week you’ve been playing around with R and variables.</p>
<p><strong>But what if you want to import data in R?</strong></p>
<p>Easy! You can use the <code>read_*()</code> functions to read your files into R. But before we dive in, let’s first talk about some computer basics. (You can skip this section if it’s too basic for you)</p>
<section id="files-folder-and-file-extensions" class="level3" data-number="1.1">
<h3 data-number="1.1" class="anchored" data-anchor-id="files-folder-and-file-extensions"><span class="header-section-number">1.1</span> Files, folder and file extensions</h3>
<p>Files saved on your computer live in a specific place. For example, if you download a file from a browser (like Google Chrome, Safari or Firefox), the file is normally saved in the <code>Download</code> folder.</p>
<p>But where does the <code>Download</code> folder live? Usually, in your user folder! The user folder normally is the name of your account or a name you picked when you created your computer account. In my case, my user folder is simply called <code>ste</code>.</p>
<div class="callout callout-style-default callout-tip no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
User folder
</div>
</div>
<div class="callout-body-container callout-body">
<p>The <strong>user folder</strong> is the folder with the name of your account.</p>
</div>
</div>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-2-contents" aria-controls="callout-2" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
How to find your user folder name
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-2" class="callout-2-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p><strong>On macOS</strong></p>
<ul>
<li><p>Open the Finder Preferences.</p></li>
<li><p>Go to <code>Sidebar</code>.</p></li>
<li><p>The name next to the house icon is the name of your home folder.</p></li>
</ul>
<p><strong>On Windows</strong></p>
<ul>
<li><p>Right-click an empty area on the navigation panel in File Explorer.</p></li>
<li><p>From the context menu, select the ‘Show all folders’ and your user profile will be added as a location in the navigation bar.</p></li>
</ul>
</div>
</div>
</div>
<p>So, let’s assume I download a file, let’s say <code>big_data.csv</code>, in the <code>Download</code> folder of my user folder.</p>
<p>Now we can represent the location of the <code>big_data.csv</code> file like so:</p>
<pre><code>ste/
└── Downloads/
    └── big_data.csv</code></pre>
<p>To mark that <code>ste</code> and <code>Downloads</code> are folders, we add a final forward slash <code>/</code>. That simply means “hey! I am a folder!”. <code>big_data.csv</code> is a file, so it doesn’t have a final <code>/</code>.</p>
<p>Instead, the file name <code>big_data.csv</code> has a <strong>file extension</strong>. The file extension is <code>.csv</code>. A file extension marks the type of file: in this the <code>big_data</code> file is a <code>.csv</code> file, a comma separated value file (we will see an example of what that looks like later).</p>
<p>Different file type have different file extensions:</p>
<ul>
<li>Excel files: <code>.xlsx</code>.</li>
<li>Plain text files: <code>.txt</code>.</li>
<li>Images: <code>.png</code>, <code>.jpg</code>, <code>.gif</code>.</li>
<li>Audio: <code>.mp3</code>, <code>.wav</code>.</li>
<li>Video: <code>.mp4</code>, <code>.mov</code>, <code>.avi</code>.</li>
<li>Etc…</li>
</ul>
<div class="callout callout-style-default callout-tip no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
File extension
</div>
</div>
<div class="callout-body-container callout-body">
<p>A file extension is a sequence of letters that indicates the type of a file and it’s separated with a <code>.</code> from the file name.</p>
</div>
</div>
</section>
<section id="file-paths" class="level3" data-number="1.2">
<h3 data-number="1.2" class="anchored" data-anchor-id="file-paths"><span class="header-section-number">1.2</span> File paths</h3>
<p>Now, we can use an alternative, more succinct way, to represent the location of the <code>big_data.csv</code>:</p>
<p><code>ste/Downloads/big_data.csv</code></p>
<p>This is called a <strong>file path</strong>! It’s the path through folders that lead you to the file. Folders are separated by <code>/</code> and the file is marked with the extension <code>.csv</code>.</p>
<div class="callout callout-style-default callout-tip no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
File path
</div>
</div>
<div class="callout-body-container callout-body">
<p>A <strong>file path</strong> indicates the location of a file on a computer as a path through folders that lead you to the file.</p>
</div>
</div>
<p>Now the million pound question: where does <code>ste/</code> live on my computer???</p>
<p>User folders are located in different places depending on the operating system you are using:</p>
<ul>
<li><p>On <strong>macOS</strong>: the user folder is in <code>/Users/</code>.</p>
<ul>
<li>You will notice that there is a forward slash also before the name of the folder. That is because the <code>/Users/</code> folder is a top folder, i.e.&nbsp;there are no folders further up in the hierarchy of folders.</li>
<li>This means that the full path for the <code>big_data.csv</code> file on a computer running macOS would be: <code>/Users/ste/Downloads/big_data.csv</code>.</li>
</ul></li>
<li><p>On <strong>Windows</strong>: the user folder is in <code>C:/Users/</code></p>
<ul>
<li>You will notice that <code>C</code> is followed by a colon <code>:</code>. That is because <code>C</code> is a drive, which contains files and folders. <code>C:</code> is not contained by any other folder, i.e.&nbsp;there are no other folders above <code>C:</code> in the hierarchy of folders.</li>
<li>This means that the full path for the <code>big_data.csv</code> file on a Windows computer would be: <code>C:/Users/ste/Downloads/big_data.csv</code>.</li>
</ul></li>
</ul>
<p>When a file path starts from a top-most folder, we call that path the <strong>absolute</strong> file path.</p>
<div class="callout callout-style-default callout-tip no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Absolute path
</div>
</div>
<div class="callout-body-container callout-body">
<p>An <strong>absolute path</strong> is a file path that starts with a top-most folder.</p>
</div>
</div>
<p>There is another type of file paths, called <strong>relative</strong> paths. A relative path is a partial file path, relative to a specific folder. You will learn how to use relative paths below, when we will go through importing files in R using R scripts below.</p>
<p>Importing files in R is very easy with the tidyverse packages. You just need to know the file type (very often the file extension helps) and the location of the file (i.e.&nbsp;the file path).</p>
<p>The next sections will teach you how to import data in R!</p>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Quiz 1
</div>
</div>
<div class="callout-body-container callout-body">
<div class="cell" data-hash="tutorial-w02_cache/html/quiz-1_2ec111a770e18956a70d10915de3ac2c">
Which of the following paths is an impossible path?
<div id="radio_NLLZLHKPAP" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_NLLZLHKPAP" value=""> <span><code>Downloads/courses/qml/data/</code></span></label><label><input type="radio" autocomplete="off" name="radio_NLLZLHKPAP" value="answer"> <span><code>/Users/smruti/Downloads/data.csv/files/</code></span></label><label><input type="radio" autocomplete="off" name="radio_NLLZLHKPAP" value=""> <span><code>sascha/Documents/files_pdf/paper.pdf</code></span></label>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="the-data" class="level2" data-number="2">
<h2 data-number="2" class="anchored" data-anchor-id="the-data"><span class="header-section-number">2</span> The data</h2>
<p>For this tutorial, we will use the data from this paper: Song et al.&nbsp;2020. <em>Second language users exhibit shallow morphological processing</em>. DOI: <a href="https://doi.org/10.1017/S0272263120000170">10.1017/S0272263120000170</a>.</p>
<p>The study consisted of a lexical decision task in which participants where first shown a prime, followed by a target word for which they had to indicate whether it was a real word or a nonce word.</p>
<p>The prime word belonged to one of three possible groups (<code>Relation_type</code> in the data) each of which refers to the morphological relation of the prime and the target word:</p>
<ul>
<li><p><code>Unrelated</code>: for example, <em>prolong</em> (assuming <em>unkindness</em> as target, [[un-kind]-ness]).</p></li>
<li><p><code>Constituent</code>: <em>unkind</em>.</p></li>
<li><p><code>NonConstituent</code>: <em>kindness</em>.</p></li>
</ul>
<p>The expectations are that</p>
<ol type="1">
<li>Lexical decisions for native English participants should be facilitated in the <code>Constituent</code> condition, but not in the <code>Unrelated</code> and <code>NonConstituent</code> conditions.</li>
<li>Lexical decisions for non-native English participants should be facilitated both in the <code>Constituent</code> and <code>NonCostituent</code> condition, but not in the <code>Unrelated</code> condition.</li>
</ol>
<p>We can interpret “facilitated lexical decisions” as higher accuracy and shorter reaction times.</p>
<p>In section 2-4 of this tutorial you will learn about:</p>
<ul>
<li><p>The data file format (a <code>.csv file</code>).</p></li>
<li><p>How to read data with the <code>read_csv()</code> function from the tidyverse packages and what packages are.</p></li>
<li><p>How to view the imported data.</p></li>
</ul>
<section id="download-the-data-file" class="level3" data-number="2.1">
<h3 data-number="2.1" class="anchored" data-anchor-id="download-the-data-file"><span class="header-section-number">2.1</span> Download the data file</h3>
<p>Please, follow these instructions carefully.</p>
<ol type="1">
<li><p>Download the file with the data by right-clicking on the following link and download the file: <a href="../data/shallow.csv">shallow.csv</a>. (Note that tutorial files are also linked in the <a href="../content.html">Course content</a> page)</p></li>
<li><p>Create a folder called <code>data/</code> (the slash is there just to remind you that it’s a folder, but you don’t have to include it in the name) in the RStudio project of the course.</p>
<ol type="1">
<li><p>To create a folder, go to the Files tab of the bottom-right panel in RStudio.</p></li>
<li><p>Make sure you are viewing the project’s main folder.</p></li>
<li><p>Click on the <code>New Folder</code> button, enter “data” in the text box and click <code>OK</code></p></li>
</ol></li>
<li><p>Move the downloaded file into the <code>data/</code> folder.</p>
<ol type="1">
<li><p>Open a Finder or File Explorer window.</p></li>
<li><p>Navigate to the folder where you have saved the downloaded file (it will very likely be the <code>Downloads/</code> folder).</p></li>
<li><p>Copy the file.</p></li>
<li><p>In Finder or File Explorer, navigate to the RStudio project folder, then the <code>data/</code> folder, and paste the file in there.</p></li>
</ol></li>
</ol>
<p>The rest of the tutorial will assume that you have created a folder called <code>data/</code> in the RStudio project folder and that <code>shallow.csv</code> is in that folder.</p>
<p>I recommend you to start being very organised with your files from now, whether it’s for this course or your dissertation or else. I also suggest to avoid overly nested structures (for example, avoid having one folder for each week for this course. Rather, save all data files in the <code>data/</code> folder).</p>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-7-contents" aria-controls="callout-7" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Organising your files
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-7" class="callout-7-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>The Open Science Framework has the following recommendations that apply very well to any type of research project.</p>
<ul>
<li><p>Use <strong>one folder</strong> per project. This will also be your RStudio project folder.</p></li>
<li><p>Separate <strong>raw data</strong> from <strong>derived data</strong>.</p></li>
<li><p>Separate <strong>code</strong> from <strong>data</strong>.</p></li>
<li><p>Make <strong>raw data read-only</strong>.</p></li>
</ul>
<p>To learn more about this, check the OSF page <a href="https://help.osf.io/article/147-organizing-files">Organising files</a>.</p>
<p>In brief, what these recommendations mean is that you want a folder for your research project/course/else, and inside the folder two folders: one for data and one for code.</p>
<p>The <code>data/</code> folder could further contain <code>raw/</code> for raw data (data that should not be lost or changed, for example collected data or annotations) and <code>derived/</code> for data that derives from the raw data, for example through automated data processing.</p>
<p>I usually also have a separate folder called <code>figs/</code> or <code>img/</code> where I save plots. Of course which folders you will have it’s ultimately up to you and needs will vary depending on the project and field!</p>
</div>
</div>
</div>
</section>
<section id="about-shallow.csv" class="level3" data-number="2.2">
<h3 data-number="2.2" class="anchored" data-anchor-id="about-shallow.csv"><span class="header-section-number">2.2</span> About <code>shallow.csv</code></h3>
<p><code>shallow.csv</code> is a <code>.csv</code> file. It looks like this (the following is just an excerpt from the file, specifically the first 5 lines):</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode txt code-with-copy"><code class="sourceCode default"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>Group,ID,List,Target,ACC,RT,logRT,Critical_Filler,Word_Nonword,Relation_type,Branching</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>L1,L1_01,A,banoshment,1,423,6.0474,Filler,Nonword,Phonological,NA</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>L1,L1_01,A,unawareness,1,603,6.4019,Critical,Word,Unrelated,Left</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>L1,L1_01,A,unholiness,1,739,6.6053,Critical,Word,Constituent,Left</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>L1,L1_01,A,bictimize,1,510,6.2344,Filler,Nonword,Phonological,NA</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>A <code>.csv</code> file is basically a format to save tabular data (i.e.&nbsp;data that looks like a table). To separate each column, a <code>.csv</code> file uses a comma <code>,</code> (hence the name “comma separated values”).</p>
<p>The first line of the file indicates the names of the columns of the table:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode txt code-with-copy"><code class="sourceCode default"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>Group,ID,List,Target,ACC,RT,logRT,Critical_Filler,Word_Nonword,Relation_type,Branching</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>There are 11 columns.</p>
<p>Then, the rest of the file contains the other rows of the table, with values for each of the 11 columns. Of course, separated by commas.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode txt code-with-copy"><code class="sourceCode default"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>L1,L1_01,A,banoshment,1,423,6.0474,Filler,Nonword,Phonological,NA</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>L1,L1_01,A,unawareness,1,603,6.4019,Critical,Word,Unrelated,Left</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>L1,L1_01,A,unholiness,1,739,6.6053,Critical,Word,Constituent,Left</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>L1,L1_01,A,bictimize,1,510,6.2344,Filler,Nonword,Phonological,NA</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The <code>shallow.csv</code> file should be placed in the <code>data/</code> folder of the course RStudio project.</p>
<p>Now, let’s import the data!</p>
<p>Importing <code>.csv</code> files is very easy. You can use the <code>read_csv()</code> function from a collection of R packages known as the <a href="https://www.tidyverse.org">tidyverse</a>.</p>
<p>But what are R packages? Find out in the following section.</p>
</section>
</section>
<section id="r-packages" class="level2" data-number="3">
<h2 data-number="3" class="anchored" data-anchor-id="r-packages"><span class="header-section-number">3</span> R packages</h2>
<p>When you install R, a <strong>library</strong> of packages is also installed. <strong>Packages</strong> are like plug-ins, they provide R with extra functionalities. The default <strong>R library</strong> contains all of the base R packages.</p>
<p>You can check all of the currently installed packages in the bottom-right panel of RStudio, in the <strong>Packages</strong> tab.</p>
<p>If you want to find the path of the R library on your computer, type <code>.libPaths()</code> in the Console. The function returns (i.e.&nbsp;outputs) the path or paths where your R library is.</p>
<div class="callout callout-style-default callout-tip no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
R library and packages
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><p>The <strong>R library</strong> contains the base R packages and all user-installed packages.</p></li>
<li><p><strong>R packages</strong> provide R with extra functionalities and are installed into the R library.</p></li>
</ul>
</div>
</div>
<section id="install-packages" class="level4" data-number="3.0.1">
<h4 data-number="3.0.1" class="anchored" data-anchor-id="install-packages"><span class="header-section-number">3.0.1</span> Install packages</h4>
<p>You can install extra packages in the R library in two ways:</p>
<ol type="1">
<li>You can use the <code>install.packages()</code> function. This function takes the name of package you want to install as a string, for example <code>install.packages("cowsay")</code></li>
<li>Or you can go the <code>Packages</code> tab in the bottom-right panel of RStudio and click on <code>Install</code>.</li>
</ol>
<p>Go ahead and try to install a package using the second method. Install the fortunes package (remember to quote the name of the package). After installing you will see that the package fortunes is listed in the Packages tab.</p>
<div class="callout callout-style-default callout-warning no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>You need to install a package ONLY ONCE!</strong> Once installed, it’s there for ever, saved in the R library. You will be able to use all of your installed packages in any RStudio project you create.</p>
</div>
</div>
</section>
<section id="attach-packages" class="level4" data-number="3.0.2">
<h4 data-number="3.0.2" class="anchored" data-anchor-id="attach-packages"><span class="header-section-number">3.0.2</span> Attach packages</h4>
<p>Now, to use a package you need to <strong>attach</strong> the package with the <code>library()</code> function.</p>
<div class="callout callout-style-default callout-warning no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>You need to attach the package you want to use once per R session.</strong></p>
</div>
</div>
<p>Let’s attach the fortunes package. Run the following code in the Console. Note that while <code>install.packages("fortunes")</code> takes the name of the package as a string, <code>library(fortunes)</code> takes the name of the package without quotes.</p>
<div class="cell" data-hash="tutorial-w02_cache/html/fortunes_0a98aed3feeb7d81de360317ac12f1d1">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(fortunes)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now you can use the functions provided by the attached package. Try it out!</p>
<div class="cell" data-hash="tutorial-w02_cache/html/fortune_920717e3cfed214ae2b135a82d7de1d5">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">fortune</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Tom Backer Johnsen: I have just started looking at R, and are getting more and
more irritated at myself for not having done that before. However, one of the
things I have not found in the documentation is some way of preparing output
from R for convenient formatting into something like MS Word.
Barry Rowlingson: Well whatever you do, don't start looking at LaTeX, because
that will get you even more irritated at yourself for not having done it before.
   -- Tom Backer Johnsen and Barry Rowlingson
      R-help (February 2006)</code></pre>
</div>
</div>
<p>To learn what a function does, you can check its documentation by typing the function name preceded by a <code>?</code> question mark. Type <code>?function</code> in the Console and hit ENTER to see the function documentation.</p>
<div class="callout callout-style-default callout-warning no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p>Remember, you need to install a package only once but you need to attach it with <code>library()</code> every time you start R.</p>
<p>Think of <code>install.packages()</code> as mounting a light bulb (installing the package) and <code>library()</code> as the light switch (attaching the package).</p>
<p><img src="../img/install-vs-attach.jpeg" class="img-fluid"></p>
</div>
</div>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Quiz 2
</div>
</div>
<div class="callout-body-container callout-body">
<div class="cell" data-hash="tutorial-w02_cache/html/quiz-2_f464ab16596a0dbb667f6afd7c18797f">
Which of the following statements is wrong?
<div id="radio_LLZLHKPAPS" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_LLZLHKPAPS" value="answer"> <span>You attach libraries with <code>library()</code>.</span></label><label><input type="radio" autocomplete="off" name="radio_LLZLHKPAPS" value=""> <span><code>install.packages()</code> does not load packages.</span></label><label><input type="radio" autocomplete="off" name="radio_LLZLHKPAPS" value=""> <span>The R library is a folder.</span></label>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="import-and-view-data" class="level2" data-number="4">
<h2 data-number="4" class="anchored" data-anchor-id="import-and-view-data"><span class="header-section-number">4</span> Import and view data</h2>
<section id="import-the-data" class="level3" data-number="4.1">
<h3 data-number="4.1" class="anchored" data-anchor-id="import-the-data"><span class="header-section-number">4.1</span> Import the data</h3>
<p>To import data in R we will use the <code>read_csv()</code> function from the <a href="https://readr.tidyverse.org">readr</a> package, one of the tidyverse packages.</p>
<p>The <code>read_csv()</code> function only requires you to specify the file path as a string (remember, strings are quoted between <code>" "</code>, for example <code>"year_data.txt"</code>).</p>
<p>On my computer, the file path of <code>shallow.csv</code> is <code>/Users/ste/qml/data/shallow.csv</code>, but on your computer the file path will be different, of course.</p>
<p>Also, note that it is not enough to use the <code>read_csv()</code> function. You also must assign the output of the <code>read_csv()</code> function (i.e.&nbsp;the data we are reading) to a variable, using the assignment arrow <code>&lt;-</code>.</p>
<p>And since the <code>read_csv()</code> is a function from the tidyverse, you first need to attach the tidyverse packages with <code>library(tidyverse)</code> (remember, you need to attach packages <strong>only once</strong> per session).</p>
<p>This will attach a set of the tidyverse packages that are commonly used in most data analysis applications, including readr. Of course, you can also attach the individual packages directly: <code>library(readr)</code>. If you use <code>library(tidyverse)</code> there is no need to attach individual tidyverse packages.</p>
<p>So, putting all together, here’s the code. <strong>Remember to change the file path to match the path of the file on your computer</strong>. Run the code in the Console to read the data.</p>
<div class="cell" data-hash="tutorial-w02_cache/html/read-example_0ba6e37b0c561431965f8d6a9d591a33">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="co"># CHANGE THE FILE PATH TO MATCH THE PATH ON YOUR COMPUTER</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>shallow <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"/Users/ste/qml/data/shallow.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Fantastic!</p>
</section>
<section id="view-the-data" class="level3" data-number="4.2">
<h3 data-number="4.2" class="anchored" data-anchor-id="view-the-data"><span class="header-section-number">4.2</span> View the data</h3>
<p>Now we can view the data.</p>
<p>The easiest way is to click on the name of the data listed in the <strong>Environment</strong> tab, in the top-right panel of RStudio.</p>
<p>You will see a nicely formatted table, as you would in a programme like Excel.</p>
<p>Data tables in R (i.e.&nbsp;spreadsheet-like data) are called <strong>data frames</strong> or <strong>tibbles</strong>.<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a></p>
<p>The <code>shallow</code> data frame contains 11 columns (called variables in the <code>Environment</code> tab). The 11 columns are the following:</p>
<ul>
<li><code>Group</code>: <code>L1</code> vs <code>L2</code> speakers of English.</li>
<li><code>ID</code>: Subject unique ID.</li>
<li><code>List</code>: Word list (A to F).</li>
<li><code>Target</code>: Target word in the lexical decision trial.</li>
<li><code>ACC</code>: Lexical decision response accuracy (<code>0</code> incorrect response, <code>1</code> correct response).</li>
<li><code>RT</code>: Reaction times of response in milliseconds.</li>
<li><code>logRT</code>: Logged reaction times.</li>
<li><code>Critical_Filler</code>: Whether the trial was a <code>filler</code> or <code>critical</code>.</li>
<li><code>Word_Nonword</code>: Whether the Target was a real <code>Word</code> or a <code>Nonword</code>.</li>
<li><code>Relation_type</code>: The type of relation between prime and target word (<code>Unrelated</code>, <code>NonCostituent</code>, <code>Constituent</code>, <code>Phonological</code>).</li>
<li><code>Branching</code>: Constituent syntactic branching, <code>Left</code> and <code>Right</code> (shout out to Charlie Puth).</li>
</ul>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Quiz 3
</div>
</div>
<div class="callout-body-container callout-body">
<div class="cell" data-hash="tutorial-w02_cache/html/quiz-3_587d73ee7bb1c33095572e6e27541e3d">
How many rows does <code>shallow</code> have?
<div id="radio_LLZLHKPAPS" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_LLZLHKPAPS" value=""> <span>11</span></label><label><input type="radio" autocomplete="off" name="radio_LLZLHKPAPS" value=""> <span>650</span></label><label><input type="radio" autocomplete="off" name="radio_LLZLHKPAPS" value="answer"> <span>6500</span></label>
</div>
</div>
</div>
</div>
<p>Great stuff! See how easy it was to import data?</p>
<div class="callout callout-style-default callout-tip no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Data formats
</div>
</div>
<div class="callout-body-container callout-body">
<p>Most of the data we will be using in this course will be in the <code>.csv</code> format.</p>
<p><strong>The comma separated values format (<code>.csv</code>) is the best format to save data in</strong> because it is basically a plain text file, it’s quick to parse, and can be opened and edited with any software (plus, it’s not a proprietary format).</p>
</div>
</div>
<p>However, you can easily import other file types as long as they are tabular or rectangular (i.e.&nbsp;spreadsheet-like), like Excel files.</p>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-15-contents" aria-controls="callout-15" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
How to import other file types
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-15" class="callout-15-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Sometimes though you might have to read other file types, for example Excel spreadsheets.</p>
<p>It’s easy to read other file type using the other <code>read_*()</code> functions:</p>
<ul>
<li><p>For Excel files (i.e.&nbsp;files with a <code>.xls</code> or <code>.xlsx</code> extension), you need to attach the <a href="https://readxl.tidyverse.org">readxl</a> package with <code>library(readxl)</code> and use the <code>read_excel()</code> function.</p></li>
<li><p>Use <code>read_tsv()</code> from the readr package (installed with the tidyverse) to read tab separated values files (these have either the <code>.txt</code> or <code>.tsv</code> extensions.</p></li>
<li><p>The flexible <code>read_delim()</code> function allows you to read a wide variety of delimited files.</p></li>
</ul>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-16-contents" aria-controls="callout-16" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Practice 1
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-16" class="callout-16-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Download the following files into the data folder. Read them in R, making sure you use the right <code>read_*()</code> function.</p>
<ul>
<li><p><a href="../data/takete_maluma.txt">takete_maluma.txt</a> (a tab separated file)</p></li>
<li><p><a href="../data/Relatives.xlsx">Relatives.xlsx</a></p></li>
<li><p>Go to <a href="https://datashare.ed.ac.uk/handle/10283/4006" class="uri">https://datashare.ed.ac.uk/handle/10283/4006</a> and download the file <code>conflict_data_.xlsx</code>. Read both sheets (“conflict_data2” and “demographics”). Any issues?</p></li>
</ul>
</div>
</div>
</div>
</section>
</section>
<section id="r-scripts" class="level2" data-number="5">
<h2 data-number="5" class="anchored" data-anchor-id="r-scripts"><span class="header-section-number">5</span> R scripts</h2>
<p>So far, you’ve been asked to write code in the <strong>Console</strong> and run it there.</p>
<p>But this is not very efficient. Every time, you need to write the code and execute it in the right order and it quickly becomes very difficult to keep track of everything when things start getting more involved.</p>
<p>A solution is to use <strong>R scripts</strong>.</p>
<div class="callout callout-style-default callout-tip no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
R script
</div>
</div>
<div class="callout-body-container callout-body">
<p>An <strong>R script</strong> is a file with the <code>.R</code> extension that contains R code.</p>
</div>
</div>
<p>For the rest of this tutorial, you will write all code in an R script.</p>
<section id="create-an-r-script" class="level3" data-number="5.1">
<h3 data-number="5.1" class="anchored" data-anchor-id="create-an-r-script"><span class="header-section-number">5.1</span> Create an R script</h3>
<p>First, create a folder called <code>code</code> in your RStudio project folder. This will be the folder where you will save all of your R scripts.</p>
<p>Now, to create a new R script, look at the top-left corner of RStudio: the first button to the left looks like a white sheet with a green plus sign. This is the <code>New file</code> button. Click on that and you will see a few options to create a new file.</p>
<p>Click on <code>R Script</code>. A new empty R script will be created and will open in the File Editor window of RStudio.</p>
<p><img src="../img/new-script-button.png" class="img-fluid"></p>
<p><strong>Note</strong> that creating an R script does not automatically saves it on your computer. To do so, either use the keyboard short-cut <code>CMD+S</code>/<code>CTRL+S</code> or click on the floppy disk icon in the menu below the file tab.</p>
<p><img src="../img/ save-button.png" class="img-fluid"></p>
<p>Save the file inside the <code>code/</code> folder with the following name: <code>tutorial-w02.R</code>.</p>
<div class="callout callout-style-default callout-warning no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p>Remember that all the files of your RStudio project don’t live inside RStudio but on your computer.</p>
<p>So you can always access them from the Finder or File Explorer! <strong>However</strong>, do not open a file by double clicking on it from the Finder/File Explorer.</p>
<p>Rather, <strong>open the RStudio project by double clicking on the <code>.Rproj</code> file</strong> and then open files from RStudio to ensure you are working within the RStudio project and the working directory is set correctly. (See the tutorial from Week 1).</p>
</div>
</div>
</section>
<section id="write-code" class="level3" data-number="5.2">
<h3 data-number="5.2" class="anchored" data-anchor-id="write-code"><span class="header-section-number">5.2</span> Write code</h3>
<p>Now, let’s start filling up that script!</p>
<p>Generally, you start the script with calls to <code>library()</code> to load all the packages you need for the script.</p>
<p>Now we only need one package, tidyverse, but in most cases you will need more than one! The best practice is to attach all of packages first, in the top of your script. Please, get in the habit of doing this from now, so that you can keep your scripts tidy and pretty!</p>
<p>Go ahead, write the following code in the top of the <code>tutorial-w02.R</code> script.</p>
<div class="cell" data-hash="tutorial-w02_cache/html/read-shallow_fa98df92dc0fafda8a9e87c6b9716d42">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>shallow <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"./data/shallow.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Wait, what is that <code>"./data/shallow.csv"</code>? That’s a <strong>relative path</strong>. We briefly mentioned relative paths above, but let’s understand the details now.</p>
<div class="callout callout-style-default callout-warning no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p>Please, don’t include <code>install.packages()</code> in your R scripts!</p>
<p>Remember, you only have to install a package once, and you can just type it in the Console.</p>
<p>But <strong>DO</strong> include <code>library()</code> in your scripts.</p>
</div>
</div>
</section>
<section id="relative-paths" class="level3" data-number="5.3">
<h3 data-number="5.3" class="anchored" data-anchor-id="relative-paths"><span class="header-section-number">5.3</span> Relative paths</h3>
<div class="callout callout-style-default callout-tip no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Relative path
</div>
</div>
<div class="callout-body-container callout-body">
<p>A <strong>relative path</strong> is a file path that is relative to a folder, which is represented by <code>./</code></p>
</div>
</div>
<p>When you are using R scripts in RStudio projects, the <code>./</code> folder paths are relative to is the project folder! This is true whichever the name of the folder/project and whichever it’s location on your computer.</p>
<p>For example, if your project it’s called <code>awesome_proj</code> and it’s in <code>Downloads/stuff/</code>, then if you write <code>./data/results.csv</code> you really mean <code>Downloads/stuff/awesome_proj/data/results.csv</code>!</p>
<p><strong>How does R know the path is relative to the project folder?</strong></p>
<p>That is because when working with RStudio projects, all relative paths are relative to the project folder (i.e.&nbsp;the folder with the <code>.Rproj</code> file)!</p>
<p>The folder which relative paths are relative to is called the <strong>working directory</strong> (directory is just another way of saying folder).</p>
<div class="callout callout-style-default callout-tip no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Working directory
</div>
</div>
<div class="callout-body-container callout-body">
<p>The <strong>working directory</strong> is the folder which relative paths are relative to.</p>
<p>When using RStudio projects, the working directory is the project folder.</p>
</div>
</div>
<p>The code <code>read_csv("./data/shallow.csv")</code> above will work because you are using an RStudio project and inside the project folder there is a folder called <code>data/</code> and in it there’s the <code>shallow.csv</code> file.</p>
<p>So from now on I encourage you to use RStudio projects, R scripts and relative paths always!</p>
<p>The benefit of doing so is that, if you move your project or rename it, or if you share the project with somebody, all the paths will just work because they are relative!</p>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-22-contents" aria-controls="callout-22" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Get the working directory
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-22" class="callout-22-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>You can get the current working directory with the <code>getwd()</code> command.</p>
<p>Run it now in the Console! Is the returned path the project folder path?</p>
<p>If not, it might be that you are not working from the RStudio project. Check the top-right corner of RStudio: is the project name in there or do you see <code>Project (none)?</code></p>
<p>If it’s the latter, you are not in an RStudio project, but you are running R from somewhere else (meaning, the working directory is somewhere else).</p>
</div>
</div>
</div>
</section>
<section id="run-the-script" class="level3" data-number="5.4">
<h3 data-number="5.4" class="anchored" data-anchor-id="run-the-script"><span class="header-section-number">5.4</span> Run the script!</h3>
<p>Finally, the time has come to <strong>run the script</strong>.</p>
<p>There are several ways of doing this. The most straightforward is to click on the <code>Run</code> button. You can find this in the top-right corner of the script window.</p>
<p><img src="../img/run-button.png" class="img-fluid"></p>
<p>An alternative way is to place the text cursor on the line of code you want to run and then press <code>CMD+ENTER</code>/<code>CTRL+ENTER</code>. This will run the line of code and move the text cursor to the next line of code.</p>
<p>You can even select multiple lines of code (as you would select text) and press <code>CMD+ENTER</code>/<code>CTRL+ENTER</code> to run multiple lines of code!</p>
<p>Now that you know how to use R scripts and run code in them, I will assume that you will keep writing new code from this tutorial in your script and run it from there!</p>
<p>Just another tip: sometimes we might want to add a few lines of text in our script, for example to take notes.</p>
<p>You can add so-called <strong>comments</strong> in R scripts, simply by starting a line with <code>#</code>.</p>
<p>For example:</p>
<div class="cell" data-hash="tutorial-w02_cache/html/comments_02140d4dbf65db2f8f8f6d66a68c9276">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># This is a comment. Let's add 6 + 3.</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="dv">6</span> <span class="sc">+</span> <span class="dv">3</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 9</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Quiz 4
</div>
</div>
<div class="callout-body-container callout-body">
<div class="cell" data-hash="tutorial-w02_cache/html/quiz-4_7910888403171317bde29cb5d5f8c1f8">
<p>Is the following a valid line of R code? <select class="webex-select"><option value="blank"></option><option value="answer">TRUE</option><option value="">FALSE</option></select></p>
</div>
<div class="sourceCode" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(x <span class="sc">+</span> <span class="dv">2</span>) <span class="co"># x = 4</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
</section>
<section id="data-transformation" class="level2" data-number="6">
<h2 data-number="6" class="anchored" data-anchor-id="data-transformation"><span class="header-section-number">6</span> Data transformation</h2>
<p><strong>Data transformation</strong> is a fundamental aspect of data analysis.</p>
<p>After the data you need to use is imported into R, you will have to filter rows, create new columns, or join data frames, among many other transformation operations.</p>
<p>In this tutorial we will learn how to obtain summary measures and how to count occurrences using the <code>summarise()</code> and <code>count()</code> functions.</p>
<section id="summary-measures" class="level3" data-number="6.1">
<h3 data-number="6.1" class="anchored" data-anchor-id="summary-measures"><span class="header-section-number">6.1</span> Summary measures</h3>
<p>During the lecture, we have learnt two types of measures.</p>
<div class="callout callout-style-default callout-tip no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Summary measures
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>Measures of central tendency</strong> (mean, median, mode) indicate the typical or central value of a sample.</p>
<p><strong>Measures of dispersion</strong> (min-max, range, standard deviation) indicate the dispersion of the sample values around the central tendency value.</p>
</div>
</div>
<p>When you work with data, you always want to get summary measures for most of the variables in the data.</p>
<p>Data reports usually include summary measures. It is also important to understand which summary measure is appropriate for which type of variable.</p>
<p>We have covered this in the lecture, so we won’t go over it again here. Instead, you will learn how to obtain summary measures using the <code>summarise()</code> function from the <a href="https://dplyr.tidyverse.org">dplyr</a> tidyverse package.</p>
<p><code>summarise()</code> takes at least two arguments:</p>
<ul>
<li><p>The data frame to summarise.</p></li>
<li><p>One or more summary functions.</p></li>
</ul>
<p>For example, let’s get the mean the reaction time column <code>RT</code>. Easy!</p>
<div class="cell" data-hash="tutorial-w02_cache/html/mean_0c185632de468101299cacb49866a619">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summarise</span>(shallow, <span class="at">RT_mean =</span> <span class="fu">mean</span>(RT))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["RT_mean"],"name":[1],"type":["dbl"],"align":["right"]}],"data":[{"1":"867.3592"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>Great! The mean reaction times of the entire sample is 867 ms.</p>
<p>What if we want also the standard deviation? Easy!</p>
<div class="cell" data-hash="tutorial-w02_cache/html/sd_c6d5be4b807c7d9e9b39a88dfa6f5e75">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summarise</span>(shallow, <span class="at">RT_mean =</span> <span class="fu">mean</span>(RT), <span class="at">RT_sd =</span> <span class="fu">sd</span>(RT))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["RT_mean"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["RT_sd"],"name":[2],"type":["dbl"],"align":["right"]}],"data":[{"1":"867.3592","2":"292.9682"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<div class="cell" data-hash="tutorial-w02_cache/html/comments-2_c6016407a5a64951511c45b609972220">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># This is a comment. Let's add 6 + 3.</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="dv">6</span> <span class="sc">+</span> <span class="dv">3</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 9</code></pre>
</div>
</div>
<p>Now we know that reaction times are on average 867 ms long and have a standard deviation of about 293 ms (rounded to the nearest integer).</p>
<p>Let’s go all the way and also get the minimum and maximum RT values.</p>
<div class="cell" data-hash="tutorial-w02_cache/html/minmax_2d94262f4a67eba13e7c6f8f6fcff7fb">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summarise</span>(</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>  shallow,</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">RT_mean =</span> <span class="fu">mean</span>(RT), <span class="at">RT_sd =</span> <span class="fu">sd</span>(RT),</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">RT_min =</span> <span class="fu">min</span>(RT), <span class="at">RT_max =</span> <span class="fu">max</span>(RT)</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["RT_mean"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["RT_sd"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["RT_min"],"name":[3],"type":["dbl"],"align":["right"]},{"label":["RT_max"],"name":[4],"type":["dbl"],"align":["right"]}],"data":[{"1":"867.3592","2":"292.9682","3":"0","4":"1994"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>Fab! When writing a data report, you could write something like this.</p>
<blockquote class="blockquote">
<p>Reaction times are on average 867 ms long (SD = 293 ms), with values ranging from 0 to 1994 ms.</p>
</blockquote>
<p>We will learn more about standard deviations from Week 4 on, but for now just think of this as a relative measure of how dispersed the data are around the mean: the higher the SD, the greater the dispersion around the mean, i.e.&nbsp;the greater the variability in the data.</p>
<p>When required, you can use the <code>median()</code> function to calculate the median, instead of the <code>mean()</code>. Go ahead and calculate the median reaction times in the data. Is it similar to the mean?</p>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Quiz 5
</div>
</div>
<div class="callout-body-container callout-body">
<div class="cell" data-hash="tutorial-w02_cache/html/quiz-5_140b34c27ee0d650136c68ccaa4b601e">
<ol type="a">
<li>What does the <code>na.rm</code> argument of <code>mean()</code> do?
<div id="radio_LLZLHKPAPS" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_LLZLHKPAPS" value=""> <span>It changes <code>NA</code>s to <code>FALSE</code>.</span></label><label><input type="radio" autocomplete="off" name="radio_LLZLHKPAPS" value=""> <span>It converts <code>NA</code>s to <code>0</code>s.</span></label><label><input type="radio" autocomplete="off" name="radio_LLZLHKPAPS" value="answer"> <span>It removes <code>NA</code>s before taking the mean.</span></label>
</div></li>
<li>Which is the mean of <code>c(4, 23, NA, 5)</code> when <code>na.rm</code> has the default value?
<div id="radio_IGRCKKKNCC" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_IGRCKKKNCC" value="answer"> <span><code>NA</code>.</span></label><label><input type="radio" autocomplete="off" name="radio_IGRCKKKNCC" value=""> <span><code>0</code>.</span></label><label><input type="radio" autocomplete="off" name="radio_IGRCKKKNCC" value=""> <span><code>10.66</code>.</span></label>
</div></li>
</ol>
</div>
<div class="callout callout-style-default callout-tip no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-25-contents" aria-controls="callout-25" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Hint
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-25" class="callout-25-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Check the documentation of <code>?mean</code>.</p>
</div>
</div>
</div>
</div>
</div>
<p>Note that R has a <code>mode()</code> function, but alas this is not the statistical mode. To get the mode of a categorical variable you can just count the occurrences of the values of that variable and the value that occurs the most is the mode!</p>
<p>Keep reading to learn how to count occurrences.</p>
</section>
<section id="count-occurrences" class="level3" data-number="6.2">
<h3 data-number="6.2" class="anchored" data-anchor-id="count-occurrences"><span class="header-section-number">6.2</span> Count occurrences</h3>
<p>We can use the <code>count()</code> function from the <a href="https://dplyr.tidyverse.org">dplyr</a> tidyverse package to count the number of occurrences for each value of a specific column. Let’s count how many trials are correct, i.e.&nbsp;let’s count occurrences in the <code>ACC</code> column.</p>
<p>Accuracy has been coded with <code>0</code> for incorrect and <code>1</code> for correct. We will see how this is not an ideal, although very common way, of coding binary variables. For now let’s keep it as is.</p>
<p>The function <code>count()</code> takes the name of tibble and the name of column you want to count values in.</p>
<div class="cell" data-hash="tutorial-w02_cache/html/count-corr_79453764bc13162b9c4edc4758bfe6fc">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">count</span>(shallow, ACC)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>How many <em>correct</em> responses are there in the <code>shallow</code> tibble?</p>
<p>Note that you can add <strong>multiple column names, separated by commas</strong>, to get counts for the combinations of values of each column.</p>
<p>Try to get counts of the combination of <code>ACC</code> and <code>Group</code> (<code>L1</code> vs <code>L2</code> participants). Replace <code>...</code> with the right code.</p>
<div class="cell" data-hash="tutorial-w02_cache/html/count-corr-group_9298962846fd944055785aabc23712ea">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">count</span>(shallow, ...)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout callout-style-default callout-tip no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-27-contents" aria-controls="callout-27" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Hint
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-27" class="callout-27-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>In <code>count()</code>, include the names of the two columns you want to get counts of, separated by commas.</p>
</div>
</div>
</div>
<p>Are there differences in accuracy between the L1 and L2 group?</p>
</section>
<section id="grouping-data" class="level3" data-number="6.3">
<h3 data-number="6.3" class="anchored" data-anchor-id="grouping-data"><span class="header-section-number">6.3</span> Grouping data</h3>
<p>Sometimes you might want to get summary measures for one variable depending on different values of another variable.</p>
<p>You can use the <code>group_by()</code> function from the <a href="https://dplyr.tidyverse.org">dplyr</a> tidyverse package, together with <code>summarise()</code> to achieve that. Let’s see how it works.</p>
<div class="cell" data-hash="tutorial-w02_cache/html/group_188208a918e4d62079902290b8161f14">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">group_by</span>(shallow, Group) <span class="sc">%&gt;%</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">RT_mean =</span> <span class="fu">mean</span>(RT),</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">RT_sd =</span> <span class="fu">sd</span>(RT)</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Group"],"name":[1],"type":["chr"],"align":["left"]},{"label":["RT_mean"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["RT_sd"],"name":[3],"type":["dbl"],"align":["right"]}],"data":[{"1":"L1","2":"789.0297","3":"238.5789"},{"1":"L2","2":"930.4581","3":"316.5679"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>The <code>group_by()</code> function takes at least two arguments:</p>
<ul>
<li><p>The name of the tibble to group.</p></li>
<li><p>The name of the columns to group the tibble by, separated by commas.</p></li>
</ul>
<p>Here we are grouping <code>shallow</code> by <code>Group</code>.</p>
<p>If you are baffled by that <code>%&gt;%</code>, keep on reading.</p>
</section>
<section id="what-the-pipe" class="level3" data-number="6.4">
<h3 data-number="6.4" class="anchored" data-anchor-id="what-the-pipe"><span class="header-section-number">6.4</span> What the pipe?!</h3>
<p>Wait, what is that thing, <code>%&gt;%</code>?</p>
<p>It’s called a <strong>pipe</strong>. Think of a pipe as a teleporter.</p>
<p>In the code above we are chaining two functions together using the pipe opeartor <code>%&gt;%</code>. The output of the first function (<code>group_by()</code>) is “teleported” into the second function <code>summarise()</code>.</p>
<p>The pipe <code>%&gt;%</code> teleports the output of the preceding function as the first argument of the following function. The output of <code>group_by</code> is a (grouped) tibble, and <code>summarise()</code> needs a tibble as its first argument.</p>
<p>That’s why the code above works!</p>
<p>In fact, you can even use a pipe for the tibble of <code>group_by()</code>, like so:</p>
<div class="cell" data-hash="tutorial-w02_cache/html/pipe_8da8c3db7c9fddddc1ad533042bda08b">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>shallow <span class="sc">%&gt;%</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Group) <span class="sc">%&gt;%</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">RT_mean =</span> <span class="fu">mean</span>(RT),</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">RT_sd =</span> <span class="fu">sd</span>(RT)</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Group"],"name":[1],"type":["chr"],"align":["left"]},{"label":["RT_mean"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["RT_sd"],"name":[3],"type":["dbl"],"align":["right"]}],"data":[{"1":"L1","2":"789.0297","3":"238.5789"},{"1":"L2","2":"930.4581","3":"316.5679"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>You see that the output of the code is the same here as it is above.</p>
<p>For comparison, this is what the code would look like without the pipe.</p>
<div class="cell" data-hash="tutorial-w02_cache/html/no-pipe_0c8555fe28f259ad763cdaa9b3127b5c">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>grouped_shallow <span class="ot">&lt;-</span> <span class="fu">group_by</span>(shallow, Group)</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="fu">summarise</span>(</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>  grouped_shallow,</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">RT_mean =</span> <span class="fu">mean</span>(RT),</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">RT_sd =</span> <span class="fu">sd</span>(RT)</span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["Group"],"name":[1],"type":["chr"],"align":["left"]},{"label":["RT_mean"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["RT_sd"],"name":[3],"type":["dbl"],"align":["right"]}],"data":[{"1":"L1","2":"789.0297","3":"238.5789"},{"1":"L2","2":"930.4581","3":"316.5679"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>Don’t worry too much if the concept of the pipe is not clear yet. It should become clearer later.</p>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Quiz 6
</div>
</div>
<div class="callout-body-container callout-body">
<div class="cell" data-hash="tutorial-w02_cache/html/quiz-6_b5a8641317509e6d97b39f0fdb8468dc">
<ol type="a">
<li>Which of the following returns the number of words in <code>shallow</code>?
<div id="radio_LLZLHKPAPS" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_LLZLHKPAPS" value=""> <span><code>count(shallow, Target)</code>.</span></label><label><input type="radio" autocomplete="off" name="radio_LLZLHKPAPS" value="answer"> <span><code>shallow %&gt;% distinct(Target) %&gt;% count()</code>.</span></label><label><input type="radio" autocomplete="off" name="radio_LLZLHKPAPS" value=""> <span><code>shallow %&gt;% count(Target)</code>.</span></label>
</div></li>
<li>The output of <code>summarise()</code> always drops the grouping. <select class="webex-select"><option value="blank"></option><option value="">TRUE</option><option value="answer">FALSE</option></select></li>
</ol>
</div>
<div class="callout callout-style-default callout-tip no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-28-contents" aria-controls="callout-28" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Hint
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-28" class="callout-28-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>For 6b., check the documentation of <code>?summarise</code>.</p>
</div>
</div>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-33-contents" aria-controls="callout-33" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Practice 2
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-33" class="callout-33-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<ul>
<li><p>Go to <a href="https://github.com/stefanocoretta/infant-gestures" class="uri">https://github.com/stefanocoretta/infant-gestures</a> and download the <code>gestures.csv</code> file in the <code>data/</code> folder. This is data from the paper [A Cross-Cultural Analysis of Early Prelinguistic Gesture Development and Its Relationship to Language Development](https://doi.org/10.1111/cdev.13406).</p></li>
<li><p>Read the file in R.</p></li>
<li><p>Calculate the following:</p>
<ul>
<li><p>Measure of central tendency and dispersion for the <code>count</code> column (it contains the number of gestures performed by each child in different tasks).</p></li>
<li><p>Measure of central tendency and dispersion for the <code>count</code>column grouped by <code>month</code> (the child’s age).</p></li>
<li><p>Total number of gestures by children (<code>dyad</code>).</p></li>
<li><p>Number of children by <code>background</code>.</p></li>
</ul></li>
<li><p>Write a short paragraph where you report the measures. You can right this as comments in your R script. For examples, see above.</p></li>
</ul>
<div class="callout callout-style-default callout-tip no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-30-contents" aria-controls="callout-30" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Hint
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-30" class="callout-30-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<ul>
<li><p>To calculate the total number of gestures by children, you need the <code>sum()</code> function.</p></li>
<li><p>To calculate the number of children by background, you need the <code>distinct()</code> function.</p></li>
</ul>
</div>
</div>
</div>
<div class="callout callout-style-default callout-warning no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-32-contents" aria-controls="callout-32" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-32" class="callout-32-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Have you tried doing the exercise and couldn’t work it out?</p>
<p>The you can check the code solution here…</p>
<div class="callout callout-style-default callout-important no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-31-contents" aria-controls="callout-31" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Code
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-31" class="callout-31-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="sourceCode" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>gestures <span class="sc">%&gt;%</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">count_med =</span> <span class="fu">median</span>(count, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">count_min =</span> <span class="fu">min</span>(count, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">count_max =</span> <span class="fu">max</span>(count, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">count_range =</span> count_max <span class="sc">-</span> count_min</span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>gestures <span class="sc">%&gt;%</span></span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(months) <span class="sc">%&gt;%</span></span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">count_med =</span> <span class="fu">median</span>(count, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">count_min =</span> <span class="fu">min</span>(count, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">count_max =</span> <span class="fu">max</span>(count, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">count_range =</span> count_max <span class="sc">-</span> count_min</span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-18"><a href="#cb23-18" aria-hidden="true" tabindex="-1"></a>gestures <span class="sc">%&gt;%</span></span>
<span id="cb23-19"><a href="#cb23-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(dyad) <span class="sc">%&gt;%</span></span>
<span id="cb23-20"><a href="#cb23-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb23-21"><a href="#cb23-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">count_tot =</span> <span class="fu">sum</span>(count)</span>
<span id="cb23-22"><a href="#cb23-22" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb23-23"><a href="#cb23-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-24"><a href="#cb23-24" aria-hidden="true" tabindex="-1"></a>gestures <span class="sc">%&gt;%</span></span>
<span id="cb23-25"><a href="#cb23-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(background, dyad) <span class="sc">%&gt;%</span></span>
<span id="cb23-26"><a href="#cb23-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(background)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="summary" class="level2" data-number="7">
<h2 data-number="7" class="anchored" data-anchor-id="summary"><span class="header-section-number">7</span> Summary</h2>
<p>You made it! You completed this week’s tutorial.</p>
<p>Here’s a summary of the R functions you learnt.</p>
<div class="callout callout-style-simple callout-note no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p><code>library()</code> attaches R packages.</p>
<p><code>read_csv()</code> reads <code>.csv</code> files in R.</p>
<p><code>summarise()</code> allows you to calculate measures of central tendency and dispersion (with <code>mean()</code>, <code>median()</code>, <code>min()</code> and <code>max()</code>).</p>
<p><code>count()</code> lets you count the number of occurrences of levels in a categorical variable.</p>
<p><code>group_by()</code> allows you to group a tibble according to one or more variables.</p>
<p>The pipe <code>%&gt;%</code> can be used to chain multiple functions.</p>
</div>
</div>
</div>


</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>A <strong>tibble</strong> is a special data frame. We will learn more about tibbles in the following weeks.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main> <!-- /main -->

<script>

/* update total correct if #webex-total_correct exists */
update_total_correct = function() {
  console.log("webex: update total_correct");

  var t = document.getElementsByClassName("webex-total_correct");
  for (var i = 0; i < t.length; i++) {
    p = t[i].parentElement;
    var correct = p.getElementsByClassName("webex-correct").length;
    var solvemes = p.getElementsByClassName("webex-solveme").length;
    var radiogroups = p.getElementsByClassName("webex-radiogroup").length;
    var selects = p.getElementsByClassName("webex-select").length;

    t[i].innerHTML = correct + " of " + (solvemes + radiogroups + selects) + " correct";
  }
}

/* webex-solution button toggling function */
b_func = function() {
  console.log("webex: toggle hide");

  var cl = this.parentElement.classList;
  if (cl.contains('open')) {
    cl.remove("open");
  } else {
    cl.add("open");
  }
}

/* check answers */
check_func = function() {
  console.log("webex: check answers");

  var cl = this.parentElement.classList;
  if (cl.contains('unchecked')) {
    cl.remove("unchecked");
    this.innerHTML = "Hide Answers";
  } else {
    cl.add("unchecked");
    this.innerHTML = "Show Answers";
  }
}

/* function for checking solveme answers */
solveme_func = function(e) {
  console.log("webex: check solveme");

  var real_answers = JSON.parse(this.dataset.answer);
  var my_answer = this.value;
  var cl = this.classList;
  if (cl.contains("ignorecase")) {
    my_answer = my_answer.toLowerCase();
  }
  if (cl.contains("nospaces")) {
    my_answer = my_answer.replace(/ /g, "")
  }

  if (my_answer == "") {
    cl.remove("webex-correct");
    cl.remove("webex-incorrect");
  } else if (real_answers.includes(my_answer)) {
    cl.add("webex-correct");
    cl.remove("webex-incorrect");
  } else {
    cl.add("webex-incorrect");
    cl.remove("webex-correct");
  }

  // match numeric answers within a specified tolerance
  if(this.dataset.tol > 0){
    var tol = JSON.parse(this.dataset.tol);
    var matches = real_answers.map(x => Math.abs(x - my_answer) < tol)
    if (matches.reduce((a, b) => a + b, 0) > 0) {
      cl.add("webex-correct");
    } else {
      cl.remove("webex-correct");
    }
  }

  // added regex bit
  if (cl.contains("regex")){
    answer_regex = RegExp(real_answers.join("|"))
    if (answer_regex.test(my_answer)) {
      cl.add("webex-correct");
    }
  }

  update_total_correct();
}

/* function for checking select answers */
select_func = function(e) {
  console.log("webex: check select");

  var cl = this.classList

  /* add style */
  cl.remove("webex-incorrect");
  cl.remove("webex-correct");
  if (this.value == "answer") {
    cl.add("webex-correct");
  } else if (this.value != "blank") {
    cl.add("webex-incorrect");
  }

  update_total_correct();
}

/* function for checking radiogroups answers */
radiogroups_func = function(e) {
  console.log("webex: check radiogroups");

  var checked_button = document.querySelector('input[name=' + this.id + ']:checked');
  var cl = checked_button.parentElement.classList;
  var labels = checked_button.parentElement.parentElement.children;

  /* get rid of styles */
  for (i = 0; i < labels.length; i++) {
    labels[i].classList.remove("webex-incorrect");
    labels[i].classList.remove("webex-correct");
  }

  /* add style */
  if (checked_button.value == "answer") {
    cl.add("webex-correct");
  } else {
    cl.add("webex-incorrect");
  }

  update_total_correct();
}

window.onload = function() {
  console.log("webex onload");
  /* set up solution buttons */
  var buttons = document.getElementsByTagName("button");

  for (var i = 0; i < buttons.length; i++) {
    if (buttons[i].parentElement.classList.contains('webex-solution')) {
      buttons[i].onclick = b_func;
    }
  }

  var check_sections = document.getElementsByClassName("webex-check");
  console.log("check:", check_sections.length);
  for (var i = 0; i < check_sections.length; i++) {
    check_sections[i].classList.add("unchecked");

    let btn = document.createElement("button");
    btn.innerHTML = "Show Answers";
    btn.classList.add("webex-check-button");
    btn.onclick = check_func;
    check_sections[i].appendChild(btn);

    let spn = document.createElement("span");
    spn.classList.add("webex-total_correct");
    check_sections[i].appendChild(spn);
  }

  /* set up webex-solveme inputs */
  var solveme = document.getElementsByClassName("webex-solveme");

  for (var i = 0; i < solveme.length; i++) {
    /* make sure input boxes don't auto-anything */
    solveme[i].setAttribute("autocomplete","off");
    solveme[i].setAttribute("autocorrect", "off");
    solveme[i].setAttribute("autocapitalize", "off");
    solveme[i].setAttribute("spellcheck", "false");
    solveme[i].value = "";

    /* adjust answer for ignorecase or nospaces */
    var cl = solveme[i].classList;
    var real_answer = solveme[i].dataset.answer;
    if (cl.contains("ignorecase")) {
      real_answer = real_answer.toLowerCase();
    }
    if (cl.contains("nospaces")) {
      real_answer = real_answer.replace(/ /g, "");
    }
    solveme[i].dataset.answer = real_answer;

    /* attach checking function */
    solveme[i].onkeyup = solveme_func;
    solveme[i].onchange = solveme_func;

    solveme[i].insertAdjacentHTML("afterend", " <span class='webex-icon'></span>")
  }

  /* set up radiogroups */
  var radiogroups = document.getElementsByClassName("webex-radiogroup");
  for (var i = 0; i < radiogroups.length; i++) {
    radiogroups[i].onchange = radiogroups_func;
  }

  /* set up selects */
  var selects = document.getElementsByClassName("webex-select");
  for (var i = 0; i < selects.length; i++) {
    selects[i].onchange = select_func;
    selects[i].insertAdjacentHTML("afterend", " <span class='webex-icon'></span>")
  }

  update_total_correct();
  PagedTableDoc.initAll();
}

</script>
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>