{
  "hash": "0458809f10028ba4796e21b14fd343fe",
  "result": {
    "markdown": "---\ntitle: \"QML tutorial - Week 2\"\neditor: visual\nexecute: \n  freeze: auto\nformat: \n  html:\n    css: [webex.css]\n    include-after-body: [webex.js]\n    # embed-resources: true \n---\n\n\n\n\n## Some basics\n\nIn the tutorial last week you've been playing around with R and variables.\n\n**But what if you want to import data in R?**\n\nEasy! You can use the `read_*()` functions to read your files into R. But before we dive in, let's first talk about some computer basics. (You can skip this section if it's too basic for you)\n\n### Files, folder and file extensions\n\nFiles saved on your computer live in a specific place. For example, if you download a file from a browser (like Google Chrome, Safari or Firefox), the file is normally saved in the `Download` folder.\n\nBut where does the `Download` folder live? Usually, in your user folder! The user folder normally is the name of your account or a name you picked when you created your computer account. In my case, my user folder is simply called `ste`.\n\n::: callout-tip\n#### User folder\n\nThe **user folder** is the folder with the name of your account.\n:::\n\n::: {.callout-note collapse=\"true\"}\n#### How to find your user folder name\n\n**On macOS**\n\n-   Open the Finder Preferences.\n\n-   Go to `Sidebar`.\n\n-   The name next to the house icon is the name of your home folder.\n\n**On Windows**\n\n-   Right-click an empty area on the navigation panel in File Explorer.\n\n-   From the context menu, select the 'Show all folders' and your user profile will be added as a location in the navigation bar.\n:::\n\nSo, let's assume I download a file, let's say `big_data.csv`, in the `Download` folder of my user folder.\n\nNow we can represent the location of the `big_data.csv` file like so:\n\n```         \nste/\n└── Downloads/\n    └── big_data.csv\n```\n\nTo mark that `ste` and `Downloads` are folders, we add a final forward slash `/`. That simply means \"hey! I am a folder!\". `big_data.csv` is a file, so it doesn't have a final `/`.\n\nInstead, the file name `big_data.csv` has a **file extension**. The file extension is `.csv`. A file extension marks the type of file: in this the `big_data` file is a `.csv` file, a comma separated value file (we will see an example of what that looks like later).\n\nDifferent file type have different file extensions:\n\n-   Excel files: `.xlsx`.\n-   Plain text files: `.txt`.\n-   Images: `.png`, `.jpg`, `.gif`.\n-   Audio: `.mp3`, `.wav`.\n-   Video: `.mp4`, `.mov`, `.avi`.\n-   Etc...\n\n::: callout-tip\n#### File extension\n\nA file extension is a sequence of letters that indicates the type of a file and it's separated with a `.` from the file name.\n:::\n\n### File paths\n\nNow, we can use an alternative, more succinct way, to represent the location of the `big_data.csv`:\n\n`ste/Downloads/big_data.csv`\n\nThis is called a **file path**! It's the path through folders that lead you to the file. Folders are separated by `/` and the file is marked with the extension `.csv`.\n\n::: callout-tip\n#### File path\n\nA **file path** indicates the location of a file on a computer as a path through folders that lead you to the file.\n:::\n\nNow the million pound question: where does `ste/` live on my computer???\n\nUser folders are located in different places depending on the operating system you are using:\n\n-   On **macOS**: the user folder is in `/Users/`.\n\n    -   You will notice that there is a forward slash also before the name of the folder. That is because the `/Users/` folder is a top folder, i.e. there are no folders further up in the hierarchy of folders.\n    -   This means that the full path for the `big_data.csv` file on a computer running macOS would be: `/Users/ste/Downloads/big_data.csv`.\n\n-   On **Windows**: the user folder is in `C:/Users/`\n\n    -   You will notice that `C` is followed by a colon `:`. That is because `C` is a drive, which contains files and folders. `C:` is not contained by any other folder, i.e. there are no other folders above `C:` in the hierarchy of folders.\n    -   This means that the full path for the `big_data.csv` file on a Windows computer would be: `C:/Users/ste/Downloads/big_data.csv`.\n\nWhen a file path starts from a top-most folder, we call that path the **absolute** file path.\n\n::: callout-tip\n#### Absolute path\n\nAn **absolute path** is a file path that starts with a top-most folder.\n:::\n\nThere is another type of file paths, called **relative** paths. A relative path is a partial file path, relative to a specific folder. You will learn how to use relative paths below, when we will go through importing files in R using R scripts below.\n\nImporting files in R is very easy with the tidyverse packages. You just need to know the file type (very often the file extension helps) and the location of the file (i.e. the file path).\n\nThe next sections will teach you how to import data in R!\n\n::: callout-note\n#### Quiz 1\n\n\nWhich of the following paths is an impossible path? <div class='webex-radiogroup' id='radio_NLLZLHKPAP'><label><input type=\"radio\" autocomplete=\"off\" name=\"radio_NLLZLHKPAP\" value=\"\"></input> <span>`Downloads/courses/qml/data/`</span></label><label><input type=\"radio\" autocomplete=\"off\" name=\"radio_NLLZLHKPAP\" value=\"answer\"></input> <span>`/Users/smruti/Downloads/data.csv/files/`</span></label><label><input type=\"radio\" autocomplete=\"off\" name=\"radio_NLLZLHKPAP\" value=\"\"></input> <span>`sascha/Documents/files_pdf/paper.pdf`</span></label></div>\n\n:::\n\n## The data\n\nFor this tutorial, we will use the data from this paper: Song et al. 2020. *Second language users exhibit shallow morphological processing*. DOI: [10.1017/S0272263120000170](https://doi.org/10.1017/S0272263120000170).\n\nThe study consisted of a lexical decision task in which participants where first shown a prime, followed by a target word for which they had to indicate whether it was a real word or a nonce word.\n\nThe prime word belonged to one of three possible groups (`Relation_type` in the data) each of which refers to the morphological relation of the prime and the target word:\n\n-   `Unrelated`: for example, *prolong* (assuming *unkindness* as target, \\[\\[un-kind\\]-ness\\]).\n\n-   `Constituent`: *unkind*.\n\n-   `NonConstituent`: *kindness*.\n\nThe expectations are that\n\n1.  Lexical decisions for native English participants should be facilitated in the `Constituent` condition, but not in the `Unrelated` and `NonConstituent` conditions.\n2.  Lexical decisions for non-native English participants should be facilitated both in the `Constituent` and `NonCostituent` condition, but not in the `Unrelated` condition.\n\nWe can interpret \"facilitated lexical decisions\" as higher accuracy and shorter reaction times.\n\nIn section 2-4 of this tutorial you will learn about:\n\n-   The data file format (a `.csv file`).\n\n-   How to read data with the `read_csv()` function from the tidyverse packages and what packages are.\n\n-   How to view the imported data.\n\n### Download the data file\n\nPlease, follow these instructions carefully.\n\n1.  Download the file with the data by right-clicking on the following link and download the file: [shallow.csv](../data/shallow.csv). (Note that tutorial files are also linked in the [Course content](../content.qmd) page)\n\n2.  Create a folder called `data/` (the slash is there just to remind you that it's a folder, but you don't have to include it in the name) in the RStudio project of the course.\n\n    1.  To create a folder, go to the Files tab of the bottom-right panel in RStudio.\n\n    2.  Make sure you are viewing the project's main folder.\n\n    3.  Click on the `New Folder` button, enter \"data\" in the text box and click `OK`\n\n3.  Move the downloaded file into the `data/` folder.\n\n    1.  Open a Finder or File Explorer window.\n\n    2.  Navigate to the folder where you have saved the downloaded file (it will very likely be the `Downloads/` folder).\n\n    3.  Copy the file.\n\n    4.  In Finder or File Explorer, navigate to the RStudio project folder, then the `data/` folder, and paste the file in there.\n\nThe rest of the tutorial will assume that you have created a folder called `data/` in the RStudio project folder and that `shallow.csv` is in that folder.\n\nI recommend you to start being very organised with your files from now, whether it's for this course or your dissertation or else. I also suggest to avoid overly nested structures (for example, avoid having one folder for each week for this course. Rather, save all data files in the `data/` folder).\n\n::: {.callout-note collapse=\"true\"}\n#### Organising your files\n\nThe Open Science Framework has the following recommendations that apply very well to any type of research project.\n\n-   Use **one folder** per project. This will also be your RStudio project folder.\n\n-   Separate **raw data** from **derived data**.\n\n-   Separate **code** from **data**.\n\n-   Make **raw data read-only**.\n\nTo learn more about this, check the OSF page [Organising files](https://help.osf.io/article/147-organizing-files).\n\nIn brief, what these recommendations mean is that you want a folder for your research project/course/else, and inside the folder two folders: one for data and one for code.\n\nThe `data/` folder could further contain `raw/` for raw data (data that should not be lost or changed, for example collected data or annotations) and `derived/` for data that derives from the raw data, for example through automated data processing.\n\nI usually also have a separate folder called `figs/` or `img/` where I save plots. Of course which folders you will have it's ultimately up to you and needs will vary depending on the project and field!\n:::\n\n### About `shallow.csv`\n\n`shallow.csv` is a `.csv` file. It looks like this (the following is just an excerpt from the file, specifically the first 5 lines):\n\n``` txt\nGroup,ID,List,Target,ACC,RT,logRT,Critical_Filler,Word_Nonword,Relation_type,Branching\nL1,L1_01,A,banoshment,1,423,6.0474,Filler,Nonword,Phonological,NA\nL1,L1_01,A,unawareness,1,603,6.4019,Critical,Word,Unrelated,Left\nL1,L1_01,A,unholiness,1,739,6.6053,Critical,Word,Constituent,Left\nL1,L1_01,A,bictimize,1,510,6.2344,Filler,Nonword,Phonological,NA\n```\n\nA `.csv` file is basically a format to save tabular data (i.e. data that looks like a table). To separate each column, a `.csv` file uses a comma `,` (hence the name \"comma separated values\").\n\nThe first line of the file indicates the names of the columns of the table:\n\n``` txt\nGroup,ID,List,Target,ACC,RT,logRT,Critical_Filler,Word_Nonword,Relation_type,Branching\n```\n\nThere are 11 columns.\n\nThen, the rest of the file contains the other rows of the table, with values for each of the 11 columns. Of course, separated by commas.\n\n``` txt\nL1,L1_01,A,banoshment,1,423,6.0474,Filler,Nonword,Phonological,NA\nL1,L1_01,A,unawareness,1,603,6.4019,Critical,Word,Unrelated,Left\nL1,L1_01,A,unholiness,1,739,6.6053,Critical,Word,Constituent,Left\nL1,L1_01,A,bictimize,1,510,6.2344,Filler,Nonword,Phonological,NA\n```\n\nThe `shallow.csv` file should be placed in the `data/` folder of the course RStudio project.\n\nNow, let's import the data!\n\nImporting `.csv` files is very easy. You can use the `read_csv()` function from a collection of R packages known as the [tidyverse](https://www.tidyverse.org).\n\nBut what are R packages? Find out in the following section.\n\n## R packages\n\nWhen you install R, a **library** of packages is also installed. **Packages** are like plug-ins, they provide R with extra functionalities. The default **R library** contains all of the base R packages.\n\nYou can check all of the currently installed packages in the bottom-right panel of RStudio, in the **Packages** tab.\n\nIf you want to find the path of the R library on your computer, type `.libPaths()` in the Console. The function returns (i.e. outputs) the path or paths where your R library is.\n\n::: callout-tip\n#### R library and packages\n\n-   The **R library** contains the base R packages and all user-installed packages.\n\n-   **R packages** provide R with extra functionalities and are installed into the R library.\n:::\n\n#### Install packages\n\nYou can install extra packages in the R library in two ways:\n\n1.  You can use the `install.packages()` function. This function takes the name of package you want to install as a string, for example `install.packages(\"cowsay\")`\n2.  Or you can go the `Packages` tab in the bottom-right panel of RStudio and click on `Install`.\n\nGo ahead and try to install a package using the first method. Install the fortunes package (remember to quote the name of the package). After installing you will see that the package fortunes is listed in the Packages tab.\n\n::: callout-warning\n**You need to install a package ONLY ONCE!** Once installed, it's there for ever, saved in the R library. You will be able to use all of your installed packages in any RStudio project you create.\n:::\n\n#### Attach packages\n\nNow, to use a package you need to **attach** the package with the `library()` function.\n\n::: callout-warning\n**You need to attach the package you want to use once per R session.**\n:::\n\nLet's attach the fortunes package. Run the following code in the Console. Note that while `install.packages(\"fortunes\")` takes the name of the package as a string, `library(fortunes)` takes the name of the package without quotes.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(fortunes)\n```\n:::\n\n\nNow you can use the functions provided by the attached package. Try it out!\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfortune()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\nPerhaps one is the real forge and the other is a forgery? Or a forge-R-y? I'll\nget my coat...\n   -- Barry Rowlingson (on the question whether http://www.RForge.net/ or\n      http://R-Forge.R-project.org/ is the official forge server)\n      R-help (April 2007)\n```\n:::\n:::\n\n\nTo learn what a function does, you can check its documentation by typing the function name preceded by a `?` question mark. Type `?function` in the Console and hit ENTER to see the function documentation.\n\n::: callout-warning\nRemember, you need to install a package only once but you need to attach it with `library()` every time you start R.\n\nThink of `install.packages()` as mounting a light bulb (installing the package) and `library()` as the light switch (attaching the package).\n\n![](/img/install-vs-attach.jpeg)\n:::\n\n::: callout-note\n#### Quiz 2\n\n\nWhich of the following statements is wrong? <div class='webex-radiogroup' id='radio_SIGRCKKKNC'><label><input type=\"radio\" autocomplete=\"off\" name=\"radio_SIGRCKKKNC\" value=\"answer\"></input> <span>You attach libraries with `library()`.</span></label><label><input type=\"radio\" autocomplete=\"off\" name=\"radio_SIGRCKKKNC\" value=\"\"></input> <span>`install.packages()` does not load packages.</span></label><label><input type=\"radio\" autocomplete=\"off\" name=\"radio_SIGRCKKKNC\" value=\"\"></input> <span>The R library is a folder.</span></label></div>\n\n:::\n\n## Import and view data\n\n### Import the data\n\nTo import data in R we will use the `read_csv()` function from the [readr](https://readr.tidyverse.org) package, one of the tidyverse packages.\n\nThe `read_csv()` function only requires you to specify the file path as a string (remember, strings are quoted between `\" \"`, for example `\"year_data.txt\"`).\n\nOn my computer, the file path of `shallow.csv` is `/Users/ste/qml/data/shallow.csv`, but on your computer the file path will be different, of course.\n\nAlso, note that it is not enough to use the `read_csv()` function. You also must assign the output of the `read_csv()` function (i.e. the data we are reading) to a variable, using the assignment arrow `<-`.\n\nAnd since the `read_csv()` is a function from the tidyverse, you first need to attach the tidyverse packages with `library(tidyverse)` (remember, you need to attach packages **only once** per session).\n\nThis will attach a set of the tidyverse packages that are commonly used in most data analysis applications, including readr. Of course, you can also attach the individual packages directly: `library(readr)`. If you use `library(tidyverse)` there is no need to attach individual tidyverse packages.\n\nSo, putting all together, here's the code. **Remember to change the file path to match the path of the file on your computer**. Run the code in the Console to read the data.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n\n# CHANGE THE FILE PATH TO MATCH THE PATH ON YOUR COMPUTER\nshallow <- read_csv(\"/Users/ste/qml/data/shallow.csv\")\n```\n:::\n\n\nFantastic!\n\n### View the data\n\nNow we can view the data.\n\nThe easiest way is to click on the name of the data listed in the **Environment** tab, in the top-right panel of RStudio.\n\nYou will see a nicely formatted table, as you would in a programme like Excel.\n\nData tables in R (i.e. spreadsheet-like data) are called **data frames** or **tibbles**.[^1]\n\n[^1]: A **tibble** is a special data frame. We will learn more about tibbles in the following weeks.\n\nThe `shallow` data frame contains 11 columns (called variables in the `Environment` tab). The 11 columns are the following:\n\n-   `Group`: `L1` vs `L2` speakers of English.\n-   `ID`: Subject unique ID.\n-   `List`: Word list (A to F).\n-   `Target`: Target word in the lexical decision trial.\n-   `ACC`: Lexical decision response accuracy (`0` incorrect response, `1` correct response).\n-   `RT`: Reaction times of response in milliseconds.\n-   `logRT`: Logged reaction times.\n-   `Critical_Filler`: Whether the trial was a `filler` or `critical`.\n-   `Word_Nonword`: Whether the Target was a real `Word` or a `Nonword`.\n-   `Relation_type`: The type of relation between prime and target word (`Unrelated`, `NonCostituent`, `Constituent`, `Phonological`).\n-   `Branching`: Constituent syntactic branching, `Left` and `Right` (shout out to Charlie Puth).\n\n::: callout-note\n#### Quiz 3\n\n\nHow many rows does `shallow` have? <div class='webex-radiogroup' id='radio_COBBMRMUZR'><label><input type=\"radio\" autocomplete=\"off\" name=\"radio_COBBMRMUZR\" value=\"\"></input> <span>11</span></label><label><input type=\"radio\" autocomplete=\"off\" name=\"radio_COBBMRMUZR\" value=\"\"></input> <span>650</span></label><label><input type=\"radio\" autocomplete=\"off\" name=\"radio_COBBMRMUZR\" value=\"answer\"></input> <span>6500</span></label></div>\n\n:::\n\nGreat stuff! See how easy it was to import data?\n\n::: callout-tip\n## Data formats\n\nMost of the data we will be using in this course will be in the `.csv` format.\n\n**The comma separated values format (`.csv`) is the best format to save data in** because it is basically a plain text file, it's quick to parse, and can be opened and edited with any software (plus, it's not a proprietary format).\n:::\n\nHowever, you can easily import other file types as long as they are tabular or rectangular (i.e. spreadsheet-like), like Excel files.\n\n::: {.callout-note collapse=\"true\"}\n#### How to import other file types\n\nSometimes though you might have to read other file types, for example Excel spreadsheets.\n\nIt's easy to read other file type using the other `read_*()` functions:\n\n-   For Excel files (i.e. files with a `.xls` or `.xlsx` extension), you need to attach the [readxl](https://readxl.tidyverse.org) package with `library(readxl)` and use the `read_excel()` function.\n\n-   Use `read_tsv()` from the readr package (installed with the tidyverse) to read tab separated values files (these have either the `.txt` or `.tsv` extensions.\n\n-   The flexible `read_delim()` function allows you to read a wide variety of delimited files.\n:::\n\n::: {.callout-note collapse=\"true\"}\n#### Practice 1\n\nDownload the following files into the data folder. Read them in R, making sure you use the right `read_*()` function.\n\n-   [takete_maluma.txt](../data/takete_maluma.txt) (a tab separated file)\n\n-   [Relatives.xlsx](../data/Relatives.xlsx)\n\n-   Go to <https://datashare.ed.ac.uk/handle/10283/4006> and download the file `conflict_data_.xlsx`. Read both sheets (\"conflict_data2\" and \"demographics\"). Any issues?\n:::\n\n## R scripts\n\nSo far, you've been asked to write code in the **Console** and run it there.\n\nBut this is not very efficient. Every time, you need to write the code and execute it in the right order and it quickly becomes very difficult to keep track of everything when things start getting more involved.\n\nA solution is to use **R scripts**.\n\n::: callout-tip\n#### R script\n\nAn **R script** is a file with the `.R` extension that contains R code.\n:::\n\nFor the rest of this tutorial, you will write all code in an R script.\n\n### Create an R script\n\nFirst, create a folder called `code` in your RStudio project folder. This will be the folder where you will save all of your R scripts.\n\nNow, to create a new R script, look at the top-left corner of RStudio: the first button to the left looks like a white sheet with a green plus sign. This is the `New file` button. Click on that and you will see a few options to create a new file.\n\nClick on `R Script`. A new empty R script will be created and will open in the File Editor window of RStudio.\n\n![](/img/new-script-button.png)\n\n**Note** that creating an R script does not automatically saves it on your computer. To do so, either use the keyboard short-cut `CMD+S`/`CTRL+S` or click on the floppy disk icon in the menu below the file tab.\n\n![](/img/%20save-button.png)\n\nSave the file inside the `code/` folder with the following name: `tutorial-w02.R`.\n\n::: callout-warning\nRemember that all the files of your RStudio project don't live inside RStudio but on your computer.\n\nSo you can always access them from the Finder or File Explorer! **However**, do not open a file by double clicking on it from the Finder/File Explorer.\n\nRather, **open the RStudio project by double clicking on the `.Rproj` file** and then open files from RStudio to ensure you are working within the RStudio project and the working directory is set correctly. (See the tutorial from Week 1).\n:::\n\n### Write code\n\nNow, let's start filling up that script!\n\nGenerally, you start the script with calls to `library()` to load all the packages you need for the script.\n\nNow we only need one package, tidyverse, but in most cases you will need more than one! The best practice is to attach all of packages first, in the top of your script. Please, get in the habit of doing this from now, so that you can keep your scripts tidy and pretty!\n\nGo ahead, write the following code in the top of the `tutorial-w02.R` script.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n\nshallow <- read_csv(\"./data/shallow.csv\")\n```\n:::\n\n\nWait, what is that `\"./data/shallow.csv\"`? That's a **relative path**. We briefly mentioned relative paths above, but let's understand the details now.\n\n::: callout-warning\nPlease, don't include `install.packages()` in your R scripts!\n\nRemember, you only have to install a package once, and you can just type it in the Console.\n\nBut **DO** include `library()` in your scripts.\n:::\n\n### Relative paths\n\n::: callout-tip\n#### Relative path\n\nA **relative path** is a file path that is relative to a folder, which is represented by `./`\n:::\n\nWhen you are using R scripts in RStudio projects, the `./` folder paths are relative to is the project folder! This is true whichever the name of the folder/project and whichever it's location on your computer.\n\nFor example, if your project it's called `awesome_proj` and it's in `Downloads/stuff/`, then if you write `./data/results.csv` you really mean `Downloads/stuff/awesome_proj/data/results.csv`!\n\n**How does R know the path is relative to the project folder?**\n\nThat is because when working with RStudio projects, all relative paths are relative to the project folder (i.e. the folder with the `.Rproj` file)!\n\nThe folder which relative paths are relative to is called the **working directory** (directory is just another way of saying folder).\n\n::: callout-tip\n#### Working directory\n\nThe **working directory** is the folder which relative paths are relative to.\n\nWhen using RStudio projects, the working directory is the project folder.\n:::\n\nThe code `read_csv(\"./data/shallow.csv\")` above will work because you are using an RStudio project and inside the project folder there is a folder called `data/` and in it there's the `shallow.csv` file.\n\nSo from now on I encourage you to use RStudio projects, R scripts and relative paths always!\n\nThe benefit of doing so is that, if you move your project or rename it, or if you share the project with somebody, all the paths will just work because they are relative!\n\n::: {.callout-note collapse=\"true\"}\n#### Get the working directory\n\nYou can get the current working directory with the `getwd()` command.\n\nRun it now in the Console! Is the returned path the project folder path?\n\nIf not, it might be that you are not working from the RStudio project. Check the top-right corner of RStudio: is the project name in there or do you see `Project (none)?`\n\nIf it's the latter, you are not in an RStudio project, but you are running R from somewhere else (meaning, the working directory is somewhere else).\n:::\n\n### Run the script!\n\nFinally, the time has come to **run the script**.\n\nThere are several ways of doing this. The most straightforward is to click on the `Run` button. You can find this in the top-right corner of the script window.\n\n![](/img/run-button.png)\n\nAn alternative way is to place the text cursor on the line of code you want to run and then press `CMD+ENTER`/`CTRL+ENTER`. This will run the line of code and move the text cursor to the next line of code.\n\nYou can even select multiple lines of code (as you would select text) and press `CMD+ENTER`/`CTRL+ENTER` to run multiple lines of code!\n\nNow that you know how to use R scripts and run code in them, I will assume that you will keep writing new code from this tutorial in your script and run it from there!\n\nJust another tip: sometimes we might want to add a few lines of text in our script, for example to take notes.\n\nYou can add so-called **comments** in R scripts, simply by starting a line with `#`.\n\nFor example:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# This is a comment. Let's add 6 + 3.\n6 + 3\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 9\n```\n:::\n:::\n\n\n::: callout-note\n#### Quiz 4\n\n\nIs the following a valid line of R code? <select class='webex-select'><option value='blank'></option><option value='answer'>TRUE</option><option value=''>FALSE</option></select>\n\n\n``` r\nsum(x + 2) # x = 4\n```\n:::\n\n## Data transformation\n\n**Data transformation** is a fundamental aspect of data analysis.\n\nAfter the data you need to use is imported into R, you will have to filter rows, create new columns, or join data frames, among many other transformation operations.\n\nIn this tutorial we will learn how to obtain summary measures and how to count occurrences using the `summarise()` and `count()` functions.\n\n### Summary measures\n\nDuring the lecture, we have learnt two types of measures.\n\n::: callout-tip\n#### Summary measures\n\n**Measures of central tendency** (mean, median, mode) indicate the typical or central value of a sample.\n\n**Measures of dispersion** (min-max, range, standard deviation) indicate the dispersion of the sample values around the central tendency value.\n:::\n\nWhen you work with data, you always want to get summary measures for most of the variables in the data.\n\nData reports usually include summary measures. It is also important to understand which summary measure is appropriate for which type of variable.\n\nWe have covered this in the lecture, so we won't go over it again here. Instead, you will learn how to obtain summary measures using the `summarise()` function from the [dplyr](https://dplyr.tidyverse.org) tidyverse package.\n\n`summarise()` takes at least two arguments:\n\n-   The data frame to summarise.\n\n-   One or more summary functions.\n\nFor example, let's get the mean the reaction time column `RT`. Easy!\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsummarise(shallow, RT_mean = mean(RT))\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"RT_mean\"],\"name\":[1],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"867.3592\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\nGreat! The mean reaction times of the entire sample is 867 ms.\n\nWhat if we want also the standard deviation? Easy!\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsummarise(shallow, RT_mean = mean(RT), RT_sd = sd(RT))\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"RT_mean\"],\"name\":[1],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"RT_sd\"],\"name\":[2],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"867.3592\",\"2\":\"292.9682\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# This is a comment. Let's add 6 + 3.\n6 + 3\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 9\n```\n:::\n:::\n\n\nNow we know that reaction times are on average 867 ms long and have a standard deviation of about 293 ms (rounded to the nearest integer).\n\nLet's go all the way and also get the minimum and maximum RT values.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsummarise(\n  shallow,\n  RT_mean = mean(RT), RT_sd = sd(RT),\n  RT_min = min(RT), RT_max = max(RT)\n)\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"RT_mean\"],\"name\":[1],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"RT_sd\"],\"name\":[2],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"RT_min\"],\"name\":[3],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"RT_max\"],\"name\":[4],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"867.3592\",\"2\":\"292.9682\",\"3\":\"0\",\"4\":\"1994\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\nFab! When writing a data report, you could write something like this.\n\n> Reaction times are on average 867 ms long (SD = 293 ms), with values ranging from 0 to 1994 ms.\n\nWe will learn more about standard deviations from Week 4 on, but for now just think of this as a relative measure of how dispersed the data are around the mean: the higher the SD, the greater the dispersion around the mean, i.e. the greater the variability in the data.\n\nWhen required, you can use the `median()` function to calculate the median, instead of the `mean()`. Go ahead and calculate the median reaction times in the data. Is it similar to the mean?\n\n::: callout-note\n#### Quiz 5\n\n\na. What does the `na.rm` argument of `mean()` do? <div class='webex-radiogroup' id='radio_XXHSNFUYBD'><label><input type=\"radio\" autocomplete=\"off\" name=\"radio_XXHSNFUYBD\" value=\"\"></input> <span>It changes `NA`s to `FALSE`.</span></label><label><input type=\"radio\" autocomplete=\"off\" name=\"radio_XXHSNFUYBD\" value=\"\"></input> <span>It converts `NA`s to `0`s.</span></label><label><input type=\"radio\" autocomplete=\"off\" name=\"radio_XXHSNFUYBD\" value=\"answer\"></input> <span>It removes `NA`s before taking the mean.</span></label></div>\nb. Which is the mean of `c(4, 23, NA, 5)` when `na.rm` has the default value? <div class='webex-radiogroup' id='radio_HVKLLLXWLG'><label><input type=\"radio\" autocomplete=\"off\" name=\"radio_HVKLLLXWLG\" value=\"answer\"></input> <span>`NA`.</span></label><label><input type=\"radio\" autocomplete=\"off\" name=\"radio_HVKLLLXWLG\" value=\"\"></input> <span>`0`.</span></label><label><input type=\"radio\" autocomplete=\"off\" name=\"radio_HVKLLLXWLG\" value=\"\"></input> <span>`10.66`.</span></label></div>\n\n\n::: {.callout-tip collapse=\"true\"}\n#### Hint\n\nCheck the documentation of `?mean`.\n:::\n:::\n\nNote that R has a `mode()` function, but alas this is not the statistical mode. To get the mode of a categorical variable you can just count the occurrences of the values of that variable and the value that occurs the most is the mode!\n\nKeep reading to learn how to count occurrences.\n\n### Count occurrences\n\nWe can use the `count()` function from the [dplyr](https://dplyr.tidyverse.org) tidyverse package to count the number of occurrences for each value of a specific column. Let's count how many trials are correct, i.e. let's count occurrences in the `ACC` column.\n\nAccuracy has been coded with `0` for incorrect and `1` for correct. We will see how this is not an ideal, although very common way, of coding binary variables. For now let's keep it as is.\n\nThe function `count()` takes the name of tibble and the name of column you want to count values in.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncount(shallow, ACC)\n```\n:::\n\n\nHow many *correct* responses are there in the `shallow` tibble?\n\nNote that you can add **multiple column names, separated by commas**, to get counts for the combinations of values of each column.\n\nTry to get counts of the combination of `ACC` and `Group` (`L1` vs `L2` participants). Replace `...` with the right code.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncount(shallow, ...)\n```\n:::\n\n\n::: {.callout-tip collapse=\"true\"}\n#### Hint\n\nIn `count()`, include the names of the two columns you want to get counts of, separated by commas.\n:::\n\nAre there differences in accuracy between the L1 and L2 group?\n\n### Grouping data\n\nSometimes you might want to get summary measures for one variable depending on different values of another variable.\n\nYou can use the `group_by()` function from the [dplyr](https://dplyr.tidyverse.org) tidyverse package, together with `summarise()` to achieve that. Let's see how it works.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngroup_by(shallow, Group) %>%\n  summarise(\n    RT_mean = mean(RT),\n    RT_sd = sd(RT)\n  )\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"Group\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"RT_mean\"],\"name\":[2],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"RT_sd\"],\"name\":[3],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"L1\",\"2\":\"789.0297\",\"3\":\"238.5789\"},{\"1\":\"L2\",\"2\":\"930.4581\",\"3\":\"316.5679\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\nThe `group_by()` function takes at least two arguments:\n\n-   The name of the tibble to group.\n\n-   The name of the columns to group the tibble by, separated by commas.\n\nHere we are grouping `shallow` by `Group`.\n\nIf you are baffled by that `%>%`, keep on reading.\n\n### What the pipe?!\n\nWait, what is that thing, `%>%`?\n\nIt's called a **pipe**. Think of a pipe as a teleporter.\n\nIn the code above we are chaining two functions together using the pipe opeartor `%>%`. The output of the first function (`group_by()`) is \"teleported\" into the second function `summarise()`.\n\nThe pipe `%>%` teleports the output of the preceding function as the first argument of the following function. The output of `group_by` is a (grouped) tibble, and `summarise()` needs a tibble as its first argument.\n\nThat's why the code above works!\n\nIn fact, you can even use a pipe for the tibble of `group_by()`, like so:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nshallow %>%\n  group_by(Group) %>%\n    summarise(\n      RT_mean = mean(RT),\n      RT_sd = sd(RT)\n    )\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"Group\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"RT_mean\"],\"name\":[2],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"RT_sd\"],\"name\":[3],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"L1\",\"2\":\"789.0297\",\"3\":\"238.5789\"},{\"1\":\"L2\",\"2\":\"930.4581\",\"3\":\"316.5679\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\nYou see that the output of the code is the same here as it is above.\n\nFor comparison, this is what the code would look like without the pipe.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngrouped_shallow <- group_by(shallow, Group)\n\nsummarise(\n  grouped_shallow,\n  RT_mean = mean(RT),\n  RT_sd = sd(RT)\n)\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"Group\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"RT_mean\"],\"name\":[2],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"RT_sd\"],\"name\":[3],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"L1\",\"2\":\"789.0297\",\"3\":\"238.5789\"},{\"1\":\"L2\",\"2\":\"930.4581\",\"3\":\"316.5679\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\nDon't worry too much if the concept of the pipe is not clear yet. It should become clearer later.\n\n::: callout-note\n#### Quiz 6\n\n\na. Which of the following returns the number of words in `shallow`? <div class='webex-radiogroup' id='radio_PAPGAGVGXZ'><label><input type=\"radio\" autocomplete=\"off\" name=\"radio_PAPGAGVGXZ\" value=\"\"></input> <span>`count(shallow, Target)`.</span></label><label><input type=\"radio\" autocomplete=\"off\" name=\"radio_PAPGAGVGXZ\" value=\"answer\"></input> <span>`shallow %>% distinct(Target) %>% count()`.</span></label><label><input type=\"radio\" autocomplete=\"off\" name=\"radio_PAPGAGVGXZ\" value=\"\"></input> <span>`shallow %>% count(Target)`.</span></label></div>\nb. The output of `summarise()` always drops the grouping. <select class='webex-select'><option value='blank'></option><option value=''>TRUE</option><option value='answer'>FALSE</option></select>\n\n\n::: {.callout-tip collapse=\"true\"}\n#### Hint\n\nFor 6b., check the documentation of `?summarise`.\n:::\n:::\n\n::: {.callout-note collapse=\"true\"}\n#### Practice 2\n\n-   Go to <https://github.com/stefanocoretta/infant-gestures> and download the `gestures.csv` file in the `data/` folder. This is data from the paper \\[A Cross-Cultural Analysis of Early Prelinguistic Gesture Development and Its Relationship to Language Development\\](https://doi.org/10.1111/cdev.13406).\n\n-   Read the file in R.\n\n-   Calculate the following:\n\n    -   Measure of central tendency and dispersion for the `count` column (it contains the number of gestures performed by each child in different tasks).\n\n    -   Measure of central tendency and dispersion for the `count`column grouped by `month` (the child's age).\n\n    -   Total number of gestures by children (`dyad`).\n\n    -   Number of children by `background`.\n\n-   Write a short paragraph where you report the measures. You can right this as comments in your R script. For examples, see above.\n\n::: {.callout-tip collapse=\"true\"}\n#### Hint\n\n-   To calculate the total number of gestures by children, you need the `sum()` function.\n\n-   To calculate the number of children by background, you need the `distinct()` function.\n:::\n\n::: {.callout-warning collapse=\"true\"}\n#### Solution\n\nHave you tried doing the exercise and couldn't work it out?\n\nThe you can check the code solution here...\n\n::: {.callout-important collapse=\"true\"}\n#### Code\n\n``` r\ngestures %>%\n  summarise(\n    count_med = median(count, na.rm = TRUE),\n    count_min = min(count, na.rm = TRUE),\n    count_max = max(count, na.rm = TRUE),\n    count_range = count_max - count_min\n  )\n\ngestures %>%\n  group_by(months) %>%\n  summarise(\n    count_med = median(count, na.rm = TRUE),\n    count_min = min(count, na.rm = TRUE),\n    count_max = max(count, na.rm = TRUE),\n    count_range = count_max - count_min\n  )\n\ngestures %>%\n  group_by(dyad) %>%\n  summarise(\n    count_tot = sum(count)\n  )\n\ngestures %>%\n  distinct(background, dyad) %>%\n  count(background)\n```\n:::\n:::\n:::\n\n## Summary\n\nYou made it! You completed this week's tutorial.\n\nHere's a summary of the R functions you learnt.\n\n::: {.callout-note appearance=\"minimal\"}\n`library()` attaches R packages.\n\n`read_csv()` reads `.csv` files in R.\n\n`summarise()` allows you to calculate measures of central tendency and dispersion (with `mean()`, `median()`, `min()` and `max()`).\n\n`count()` lets you count the number of occurrences of levels in a categorical variable.\n\n`group_by()` allows you to group a tibble according to one or more variables.\n\nThe pipe `%>%` can be used to chain multiple functions.\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../site_libs/pagedtable-1.1/css/pagedtable.css\" rel=\"stylesheet\" />\n<script src=\"../site_libs/pagedtable-1.1/js/pagedtable.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}