{
  "hash": "404b706d3c13bd96547e1cf5ef805ac3",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Reporting your data analusis\"\ndescription: \"Learn how to report summary measures, plot descriptions and regression models\"\nauthor: \"Stefano Coretta\"\ndate: 2024-11-11\nexecute: \n  freeze: auto\nformat: \n  html:\n    css: [webex.css]\n    include-after-body: [webex.js]\n    embed-resources: false\n---\n\n\n\n\n\n\n::: callout-warning\n## Prerequisites\n\n- [Summary measures](summaries.qmd).\n- [Plotting basics](plotting-basics.qmd).\n- [Regression: Categorical predictors](intro-regression-categorical.qmd).\n:::\n\n## Overview\n\nIn this post, I will show you how you can report summary measures, describe plots and report regression models. I will illustrate this using one data table. You will practice this with different data I will provide the code of.\n\n## Reporting\n\nLets focus on the data from `winter2012/polite.csv` (details on the study and data [here](https://uoelel.github.io/qml-data/data/winter2012/polite.html)). (Remember to attach all the necessary packages!)\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\npolite <- read_csv(\"data/winter2012/polite.csv\")\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nRows: 224 Columns: 27\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr  (6): subject, gender, birthplace, musicstudent, task, attitude\ndbl (21): months_ger, scenario, total_duration, articulation_rate, f0mn, f0s...\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n\n\n:::\n:::\n\n\n\n\nYou would normally also provide information on the data itself, like number of participants, socio-demographic information, total number of observations and so on. I won't illustrate that since it is self-explanatory. Check papers in your preferred area of linguistics to see what others do.\n\nLet's calculate the summary measures.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\npolite |> \n  group_by(attitude, gender) |> \n  summarise(\n    mean_f0 = round(mean(f0mn, na.rm = TRUE)),\n    sd_f0 = round(sd(f0mn, na.rm = TRUE))\n  )\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n`summarise()` has grouped output by 'attitude'. You can override using the\n`.groups` argument.\n```\n\n\n:::\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"attitude\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"gender\"],\"name\":[2],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"mean_f0\"],\"name\":[3],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"sd_f0\"],\"name\":[4],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"inf\",\"2\":\"F\",\"3\":\"257\",\"4\":\"40\"},{\"1\":\"inf\",\"2\":\"M\",\"3\":\"137\",\"4\":\"33\"},{\"1\":\"pol\",\"2\":\"F\",\"3\":\"239\",\"4\":\"45\"},{\"1\":\"pol\",\"2\":\"M\",\"3\":\"126\",\"4\":\"34\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\n\n\nYou can report them like so.\n\n> For female participants, the average f0 has a mean of 257 hz (SD = 40) in the informal condition and a mean of 239 hz (SD = 45) in the polite condition. There is a raw difference of 18 hz. For male participants, the average f0 has a mean of 137 hz (SD = 33) in the informal condition and 126 hz (SD = 34) in the polite condition, with a raw difference of 11 hz.\n\nRemember to report a measure of central tendency and a measure of dispersion (a lot of researchers still just report measures of central tendency, but they are meaningless without an accompanying measure of dispersion, as you have now learnt).\n\nNow let's plot the data.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\npolite |> \n  drop_na(f0mn) |> \n  ggplot(aes(attitude, f0mn)) +\n  geom_jitter(width = 0.1, alpha = 0.5) +\n  stat_summary(fun.data = \"mean_cl_boot\", aes(colour = attitude)) +\n  facet_grid(cols = vars(gender)) +\n  labs(\n    x = \"Attitude\", y = \"Average f0 (hz)\",\n    caption = \"The coloured dots with whiskers represent the mean with 95% bootsrapped Confidence Intervals.\"\n  ) +\n  theme(legend.position = \"none\")\n```\n\n::: {.cell-output-display}\n![Average f0 by attitude condition and gender](reporting_files/figure-html/fig-polite-plot-1.png){#fig-polite-plot width=672}\n:::\n:::\n\n\n\n\nIn the text you could write:\n\n> @fig-polite-plot shows the average f0 by attitude (informal vs polite) and gender (female vs male). Each dot is the average f0 of a single participant. The plot also includes mean (coloured dots) with 95% bootstrapped Confidence Intervals. It can be observed that the average f0 of male speakers is generally lower than that of female speakers. Furthermore, there is a slight trend for f0 to be somewhat lower in the polite condition relative to the informal condition, in both genders (with females potentially showing a slightly larger difference than males). Finally, there seems to be more variability in average f0 within female than within male participants.\n\nAnd now onto modelling.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\npolite_bm <- brm(\n  f0mn ~ 0 + attitude:gender,\n  family = gaussian,\n  data = polite,\n  cores = 4,\n  seed = 7819,\n  file = \"cache/reporting-polite_bm\"\n)\n\nsummary(polite_bm, prob = 0.8)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n Family: gaussian \n  Links: mu = identity; sigma = identity \nFormula: f0mn ~ 0 + attitude:gender \n   Data: polite (Number of observations: 212) \n  Draws: 4 chains, each with iter = 2000; warmup = 1000; thin = 1;\n         total post-warmup draws = 4000\n\nRegression Coefficients:\n                    Estimate Est.Error l-80% CI u-80% CI Rhat Bulk_ESS Tail_ESS\nattitudeinf:genderF   256.72      5.06   250.03   263.20 1.00     5053     3197\nattitudepol:genderF   238.88      4.91   232.56   245.25 1.00     5102     3171\nattitudeinf:genderM   137.14      5.96   129.56   144.77 1.00     5184     3243\nattitudepol:genderM   126.31      5.77   118.94   133.67 1.00     4657     3372\n\nFurther Distributional Parameters:\n      Estimate Est.Error l-80% CI u-80% CI Rhat Bulk_ESS Tail_ESS\nsigma    39.09      1.96    36.65    41.64 1.00     5046     3013\n\nDraws were sampled using sampling(NUTS). For each parameter, Bulk_ESS\nand Tail_ESS are effective sample size measures, and Rhat is the potential\nscale reduction factor on split chains (at convergence, Rhat = 1).\n```\n\n\n:::\n\n```{.r .cell-code}\navg_comparisons(polite_bm, variables = \"attitude\", by = \"gender\", conf_level = 0.8)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n gender Estimate 10.0 % 90.0 %\n      F    -17.8  -26.9 -8.760\n      M    -10.9  -21.2 -0.495\n\nTerm: attitude\nType:  response \nComparison: mean(pol) - mean(inf)\nColumns: term, contrast, gender, estimate, conf.low, conf.high, predicted_lo, predicted_hi, predicted, tmp_idx \n```\n\n\n:::\n:::\n\n\n\n\nYou can report it this way:\n\n> We fitted a Bayesian regression model to average f0, using a Gaussian distribution as the distribution family of the outcome. As predictors, we included attitude (informal vs polite) and gender (female vs male). Both predictors were coded using indexing by suppressing the intercept in the model with the `0+` syntax.\n> \n> According to the model, the average f0 for female participants is between 247--267 hz when speaking informally vs 230--248 when speaking politely, at 80% confidence. In males, the average f0 is between 126--149 hz in informal speech vs 115--138 hz in polite speech, at 80% probability. The difference in f0 between polite and informal speech is between -27 and -9 hz in females and between -21 and -0.5 hz in males; in other words, f0 is 9--27 hz lower in females and 0.5--21 hz lower in males when the speech is polite relative to informal speech, at 80% confidence.\n\nYou could also calculate and report the \"difference of differences\" (i.e. the difference between the informal/polite difference of females and the informal/polite difference of males). You can achieve that using the same function, `avg_comparisions()` (check the function's documentation).\n\n::: callout-tip\n### On interpreting Credible Intervals\n\nCredible Intervals are both about the probability that the parameter value is within that interval and the confidence we can have that the value is within that interval.\n\nSo for example with a 75% CrI [-1, +3], we can say that:\n\n- There is a 75% probability that the value is between -1 and +3.\n- We can be 75% confident that the value is between -1 and +3.\n\nAlas, the naming of \"Confidence Intervals\" is unfortunate, because they don't measure confidence at all.\n:::\n\n## Practice\n\nNow, look at the following code (feel free to try it out) and write a report of the results (summary measures, plots and regression model). If you have any questions, ask the tutors for help (we are not expecting that you know exactly what is going on with the code, that's part of the challenge, so if you are confused, just ask!). We won't release a solution, so either ask us or post your report on Piazza for feedback.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nshallow <- read_csv(\"data/song2020/shallow.csv\") |> \n  filter(Critical_Filler == \"Critical\") |> \n  mutate(Relation_type = factor(Relation_type, levels = c(\"Unrelated\", \"NonConstituent\", \"Constituent\")))\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nRows: 6500 Columns: 11\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (8): Group, ID, List, Target, Critical_Filler, Word_Nonword, Relation_ty...\ndbl (3): ACC, RT, logRT\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nshallow |> \n  group_by(Group, Relation_type) |> \n  summarise(\n    accuracy_prop = round(mean(ACC), 2)\n  )\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"Group\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Relation_type\"],\"name\":[2],\"type\":[\"fct\"],\"align\":[\"left\"]},{\"label\":[\"accuracy_prop\"],\"name\":[3],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"L1\",\"2\":\"Unrelated\",\"3\":\"0.83\"},{\"1\":\"L1\",\"2\":\"NonConstituent\",\"3\":\"0.76\"},{\"1\":\"L1\",\"2\":\"Constituent\",\"3\":\"0.90\"},{\"1\":\"L2\",\"2\":\"Unrelated\",\"3\":\"0.80\"},{\"1\":\"L2\",\"2\":\"NonConstituent\",\"3\":\"0.75\"},{\"1\":\"L2\",\"2\":\"Constituent\",\"3\":\"0.85\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n\n```{.r .cell-code}\nshallow |> \n  group_by(Group, ID, Relation_type) |> \n  summarise(\n    accuracy_prop = round(mean(ACC), 2)\n  ) |> \n  pivot_wider(names_from = Relation_type, values_from = accuracy_prop) |> \n  group_by(Group) |> \n  summarise(\n    range(Unrelated), range(NonConstituent), range(Constituent)\n  )\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"Group\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"range(Unrelated)\"],\"name\":[2],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"range(NonConstituent)\"],\"name\":[3],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"range(Constituent)\"],\"name\":[4],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"L1\",\"2\":\"0.42\",\"3\":\"0.50\",\"4\":\"0.67\"},{\"1\":\"L1\",\"2\":\"1.00\",\"3\":\"1.00\",\"4\":\"1.00\"},{\"1\":\"L2\",\"2\":\"0.33\",\"3\":\"0.17\",\"4\":\"0.50\"},{\"1\":\"L2\",\"2\":\"1.00\",\"3\":\"1.00\",\"4\":\"1.00\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ncorrect_prop <- shallow |>\n  group_by(ID, Group, Relation_type) |>\n  summarise(\n  correct_prop = sum(ACC) / n(),\n    # The following drops the grouping created by group_by() which we don't\n    # need anymore.\n    .groups = \"drop\"\n  )\n\nggplot() +\n  # Proportion of each participant\n  geom_jitter(\n    data = correct_prop,\n    aes(x = Relation_type, y = correct_prop),\n    width = 0.1, alpha = 0.5, height = 0\n  ) +\n  # Mean proportion by accuracy with confidence interval\n  stat_summary(\n    data = shallow,\n    aes(x = Relation_type, y = ACC, colour = Relation_type),\n    fun.data = \"mean_cl_boot\", size = 1\n  ) +\n  labs(\n    title = \"Proportion of correct responses by participant, relation type and group\",\n    caption = \"Mean proportion is represented by coloured points with 95% bootstrapped Confidence Intervals.\",\n    x = \"Relation type\",\n    y = \"Proportion\"\n  ) +\n  facet_grid(cols = vars(Group)) +\n  ylim(0, 1) +\n  geom_hline(yintercept = 0.5, linetype = \"dashed\") +\n  theme(legend.position = \"none\")\n```\n\n::: {.cell-output-display}\n![](reporting_files/figure-html/shallow-plot-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nshallow_bm <- brm(\n  ACC ~ 0 + Group:Relation_type,\n  family = bernoulli,\n  data = shallow,\n  cores = 4,\n  seed = 1827,\n  file = \"cache/reporting-shallow_bm\"\n)\n\nsummary(shallow_bm, prob = 0.85)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n Family: bernoulli \n  Links: mu = logit \nFormula: ACC ~ 0 + Group:Relation_type \n   Data: shallow (Number of observations: 1950) \n  Draws: 4 chains, each with iter = 2000; warmup = 1000; thin = 1;\n         total post-warmup draws = 4000\n\nRegression Coefficients:\n                                    Estimate Est.Error l-85% CI u-85% CI Rhat\nGroupL1:Relation_typeUnrelated          1.62      0.14     1.41     1.82 1.00\nGroupL2:Relation_typeUnrelated          1.36      0.12     1.20     1.54 1.00\nGroupL1:Relation_typeNonConstituent     1.19      0.18     0.93     1.45 1.00\nGroupL2:Relation_typeNonConstituent     1.08      0.15     0.86     1.30 1.00\nGroupL1:Relation_typeConstituent        2.20      0.18     1.94     2.48 1.00\nGroupL2:Relation_typeConstituent        1.74      0.13     1.56     1.92 1.00\n                                    Bulk_ESS Tail_ESS\nGroupL1:Relation_typeUnrelated          6178     3013\nGroupL2:Relation_typeUnrelated          7031     3164\nGroupL1:Relation_typeNonConstituent     5373     2991\nGroupL2:Relation_typeNonConstituent     5679     2988\nGroupL1:Relation_typeConstituent        6289     3118\nGroupL2:Relation_typeConstituent        5413     3055\n\nDraws were sampled using sampling(NUTS). For each parameter, Bulk_ESS\nand Tail_ESS are effective sample size measures, and Rhat is the potential\nscale reduction factor on split chains (at convergence, Rhat = 1).\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\navg_comparisons(shallow_bm, variables = list(Relation_type = \"pairwise\"), by = \"Group\") |> \n  as.data.frame() |> \n  mutate(\n    conf.low = round(conf.low, 2), conf.high = round(conf.high, 2)\n  ) |> \n  select(Group, contrast, conf.low, conf.high)\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"Group\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"contrast\"],\"name\":[2],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"conf.low\"],\"name\":[3],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"conf.high\"],\"name\":[4],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"L1\",\"2\":\"mean(NonConstituent) - mean(Unrelated)\",\"3\":\"-0.14\",\"4\":\"0.01\"},{\"1\":\"L2\",\"2\":\"mean(NonConstituent) - mean(Unrelated)\",\"3\":\"-0.12\",\"4\":\"0.02\"},{\"1\":\"L1\",\"2\":\"mean(Constituent) - mean(Unrelated)\",\"3\":\"0.02\",\"4\":\"0.11\"},{\"1\":\"L2\",\"2\":\"mean(Constituent) - mean(Unrelated)\",\"3\":\"0.00\",\"4\":\"0.10\"},{\"1\":\"L1\",\"2\":\"mean(Constituent) - mean(NonConstituent)\",\"3\":\"0.06\",\"4\":\"0.21\"},{\"1\":\"L2\",\"2\":\"mean(Constituent) - mean(NonConstituent)\",\"3\":\"0.04\",\"4\":\"0.17\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../site_libs/pagedtable-1.1/css/pagedtable.css\" rel=\"stylesheet\" />\n<script src=\"../site_libs/pagedtable-1.1/js/pagedtable.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}