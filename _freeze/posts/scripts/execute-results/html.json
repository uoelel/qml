{
  "hash": "da64c5bdaca0a27405d4a1d01a70b2c8",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"R scripts\"\ndescription: \"Learn about how to organise your code in R scripts\"\nauthor: \"Stefano Coretta\"\ndate: 2024-09-18\neditor: visual\nformat: \n  html:\n    css: [webex.css]\n    include-after-body: [webex.js]\nexecute: \n  warning: false\n---\n\n\n\n\n::: callout-warning\n#### Pre-requisites\n\n-   [Data types](data-types.qmd)\n:::\n\n## R scripts\n\n\n\n\n\n\n\n\n\n::: callout-warning\n#### Pre-requisites\n\n-   [Data types](data-types.qmd)\n:::\n\nSo far, you've been writing R code in the **Console** and run it there.\n\nBut this is not very efficient. Every time, you need to write the code and execute it in the right order and it quickly becomes very difficult to keep track of everything when things start getting more involved.\n\nA solution is to use **R scripts**.\n\n::: callout-tip\n#### R script\n\nAn **R script** is a file with the `.R` extension that contains R code.\n:::\n\nFor the rest of this tutorial, you will write all code in an R script.\n\n## Create an R script\n\nFirst, create a folder called `code` in your RStudio project folder. This will be the folder where you will save all of your R scripts and other documents.\n\nNow, to create a new R script, look at the top-left corner of RStudio: the first button to the left looks like a white sheet with a green plus sign. This is the `New file` button. Click on that and you will see a few options to create a new file.\n\nClick on `R Script`. A new empty R script will be created and will open in the File Editor window of RStudio.\n\n![](../img/new-script-button.png)\n\n**Note** that creating an R script does not automatically saves it on your computer. To do so, either use the keyboard short-cut `CMD+S`/`CTRL+S` or click on the floppy disk icon in the menu below the file tab.\n\n![](../img/save-button.png)\n\nSave the file inside the `code/` folder with the following name: `tutorial-w02.R`.\n\n::: callout-warning\nRemember that all the files of your RStudio project don't live inside RStudio but on your computer.\n\nSo you can always access them from the Finder or File Explorer! **However**, do not open a file by double clicking on it from the Finder/File Explorer.\n\nRather, **open the RStudio project by double clicking on the `.Rproj` file** and then open files from RStudio to ensure you are working within the RStudio project and the working directory is set correctly. (See the tutorial from Week 1).\n:::\n\n### Write code\n\nNow, let's start filling up that script!\n\nGenerally, you start the script with calls to `library()` to load all the packages you need for the script.\n\nNow we only need one package, tidyverse, but in most cases you will need more than one! The best practice is to attach all of packages first, in the top of your script. Please, get in the habit of doing this from now, so that you can keep your scripts tidy and pretty!\n\nGo ahead, write the following code in the top of the `my_first.R` script.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n\nshallow <- read_csv(\"./data/song2020/shallow.csv\")\n```\n:::\n\n\n\n\nWait, what is that `\"./data/shallow.csv\"`? That's a [**relative path**](data-types.qmd#relative-paths)!\n\n::: callout-warning\nPlease, don't include `install.packages()` in your R scripts!\n\nRemember, you only have to install a package once, and you can just type it in the Console.\n\nBut **DO** include `library()` in your scripts.\n:::\n\n## Run the script!\n\nFinally, the time has come to **run the script**.\n\nThere are several ways of doing this. The most straightforward is to click on the `Run` button. You can find this in the top-right corner of the script window.\n\n![](../img/run-button.png)\n\nAn alternative way is to place the text cursor on the line of code you want to run and then press `CMD+ENTER`/`CTRL+ENTER`. This will run the line of code and move the text cursor to the next line of code.\n\nYou can even select multiple lines of code (as you would select text) and press `CMD+ENTER`/`CTRL+ENTER` to run multiple lines of code!\n\nNow that you know how to use R scripts and run code in them, I will assume that you will keep writing new code from this tutorial in your script and run it from there!\n\nJust another tip: sometimes we might want to add a few lines of text in our script, for example to take notes.\n\nYou can add so-called **comments** in R scripts, simply by starting a line with `#`.\n\nFor example:\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# This is a comment. Let's add 6 + 3.\n6 + 3\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 9\n```\n\n\n:::\n:::\n\n\n\n\n::: callout-note\n#### Quiz 1\n\n\n\n\nIs the following a valid line of R code? <select class='webex-select'><option value='blank'></option><option value='answer'>TRUE</option><option value=''>FALSE</option></select>\n\n\n\n\n``` r\nsum(x + 2) # x = 4\n```\n:::\n\n::: {.callout-caution collapse=\"true\"}\n#### Explanation\n\nIt is a valid line of R code, but if you got an error it is probably because the variable `x` does not exist (yet). If you add the line `x <- 4` before `sum(x + 2) # x = 4`, the latter will work just fine.\n\nSo you see there is a difference between *valid* code and *working* code.\n:::\n\n::: callout-warning\n#### Pre-requisites\n\n-   [Introduction to Quarto](intro-quarto.qmd)\n-   [Reading multiple files](import-multiple.qmd)\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../site_libs/pagedtable-1.1/css/pagedtable.css\" rel=\"stylesheet\" />\n<script src=\"../site_libs/pagedtable-1.1/js/pagedtable.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}